window.MagicSlideshow=function(){function e(t){var e=null;return t instanceof l?e=t:"element"==s.jTypeOf(a(t))&&(e=a(t).jFetch("slideshow")),e}var i,s;i=s=function(){function t(t){var e=t.charAt(0).toUpperCase()+t.slice(1);return t in l||"Webkit"+e in l||"Moz"+e in l||"ms"+e in l||"O"+e in l}function e(t){var e,i;return i=s.browser.webkit&&"filter"==t?!1:t in l,!i&&(e=s.browser.cssDomPrefix+t.charAt(0).toUpperCase()+t.slice(1),e in l)?e:t}var i={version:"v3.3-b5",UUID:0,storage:{},$uuid:function(t){return t.$J_UUID||(t.$J_UUID=++s.UUID)},getStorage:function(t){return s.storage[t]||(s.storage[t]={})},$F:function(){},$false:function(){return!1},$true:function(){return!0},stylesId:"mjs-"+Math.floor(Math.random()*(new Date).getTime()),defined:function(t){return void 0!=t},ifndef:function(t,e){return void 0!=t?t:e},exists:function(t){return!!t},jTypeOf:function(t){if(!s.defined(t))return!1;if(t.$J_TYPE)return t.$J_TYPE;if(t.nodeType){if(1==t.nodeType)return"element";if(3==t.nodeType)return"textnode"}if(t.length&&t.item)return"collection";if(t.length&&t.callee)return"arguments";if((t instanceof window.Object||t instanceof window.Function)&&t.constructor===s.Class)return"class";if(t instanceof window.Array)return"array";if(t instanceof window.Function)return"function";if(t instanceof window.String)return"string";if(s.browser.trident){if(s.defined(t.cancelBubble))return"event"}else if(t===window.event||t.constructor==window.Event||t.constructor==window.MouseEvent||t.constructor==window.UIEvent||t.constructor==window.KeyboardEvent||t.constructor==window.KeyEvent)return"event";return t instanceof window.Date?"date":t instanceof window.RegExp?"regexp":t===window?"window":t===document?"document":typeof t},extend:function(t,e){if(t instanceof window.Array||(t=[t]),!e)return t[0];for(var i=0,n=t.length;n>i;i++)if(s.defined(t))for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o))try{t[i][o]=e[o]}catch(r){}return t[0]},implement:function(t,e){t instanceof window.Array||(t=[t]);for(var i=0,n=t.length;n>i;i++)if(s.defined(t[i])&&t[i].prototype)for(var o in e||{})t[i].prototype[o]||(t[i].prototype[o]=e[o]);return t[0]},nativize:function(t,e){if(!s.defined(t))return t;for(var i in e||{})t[i]||(t[i]=e[i]);return t},$try:function(){for(var t=0,e=arguments.length;e>t;t++)try{return arguments[t]()}catch(i){}return null},$A:function(t){if(!s.defined(t))return s.$([]);if(t.toArray)return s.$(t.toArray());if(t.item){for(var e=t.length||0,i=new Array(e);e--;)i[e]=t[e];return s.$(i)}return s.$(Array.prototype.slice.call(t))},now:function(){return(new Date).getTime()},detach:function(t){var e;switch(s.jTypeOf(t)){case"object":e={};for(var i in t)e[i]=s.detach(t[i]);break;case"array":e=[];for(var n=0,o=t.length;o>n;n++)e[n]=s.detach(t[n]);break;default:return t}return s.$(e)},$:function(t){var e=!0;if(!s.defined(t))return null;if(t.$J_EXT)return t;switch(s.jTypeOf(t)){case"array":return t=s.nativize(t,s.extend(s.Array,{$J_EXT:s.$F})),t.jEach=t.forEach,t;case"string":var i=document.getElementById(t);return s.defined(i)?s.$(i):null;case"window":case"document":s.$uuid(t),t=s.extend(t,s.Doc);break;case"element":s.$uuid(t),t=s.extend(t,s.Element);break;case"event":t=s.extend(t,s.Event);break;case"textnode":case"function":case"array":case"date":default:e=!1}return e?s.extend(t,{$J_EXT:s.$F}):t},$new:function(t,e,i){return s.$(s.doc.createElement(t)).setProps(e||{}).jSetCss(i||{})},addCSS:function(t,e,i){var n,o,r,a=[],h=-1;if(i||(i=s.stylesId),n=s.$(i)||s.$new("style",{id:i,type:"text/css"}).jAppendTo(document.head||document.body,"top"),o=n.sheet||n.styleSheet,"string"!=s.jTypeOf(e)){for(var r in e)a.push(r+":"+e[r]);e=a.join(";")}return h=o.insertRule?o.insertRule(t+" {"+e+"}",o.cssRules.length):o.addRule(t,e)},removeCSS:function(t,e){var i,n;i=s.$(t),"element"===s.jTypeOf(i)&&(n=i.sheet||i.styleSheet,n.deleteRule?n.deleteRule(e):n.removeRule&&n.removeRule(e))},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)}).toUpperCase()},getAbsoluteURL:function(){var t;return function(e){return t||(t=document.createElement("a")),t.setAttribute("href",e),("!!"+t.href).replace("!!","")}}(),getHashCode:function(t){for(var e=0,i=t.length,s=0;i>s;++s)e=31*e+t.charCodeAt(s),e%=4294967296;return e}},s=i;i.$;window.magicJS||(window.magicJS=i,window.$mjs=i.$),s.Array={$J_TYPE:"array",indexOf:function(t,e){for(var i=(this.length,this.length),s=0>e?Math.max(0,i+e):e||0;i>s;s++)if(this[s]===t)return s;return-1},contains:function(t,e){return-1!=this.indexOf(t,e)},forEach:function(t,e){for(var i=0,s=this.length;s>i;i++)i in this&&t.call(e,this[i],i,this)},filter:function(t,e){for(var i=[],s=0,n=this.length;n>s;s++)if(s in this){var o=this[s];t.call(e,this[s],s,this)&&i.push(o)}return i},map:function(t,e){for(var i=[],s=0,n=this.length;n>s;s++)s in this&&(i[s]=t.call(e,this[s],s,this));return i}},s.implement(String,{$J_TYPE:"string",jTrim:function(){return this.replace(/^\s+|\s+$/g,"")},eq:function(t,e){return e?this.toString()===t.toString():this.toLowerCase().toString()===t.toLowerCase().toString()},jCamelize:function(){return this.replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()})},dashize:function(){return this.replace(/[A-Z]/g,function(t){return"-"+t.charAt(0).toLowerCase()})},jToInt:function(t){return parseInt(this,t||10)},toFloat:function(){return parseFloat(this)},jToBool:function(){return!this.replace(/true/i,"").jTrim()},has:function(t,e){return e=e||"",(e+this+e).indexOf(e+t+e)>-1}}),i.implement(Function,{$J_TYPE:"function",jBind:function(){var t=s.$A(arguments),e=this,i=t.shift();return function(){return e.apply(i||null,t.concat(s.$A(arguments)))}},jBindAsEvent:function(){var t=s.$A(arguments),e=this,i=t.shift();return function(n){return e.apply(i||null,s.$([n||(s.browser.ieMode?window.event:null)]).concat(t))}},jDelay:function(){var t=s.$A(arguments),e=this,i=t.shift();return window.setTimeout(function(){return e.apply(e,t)},i||0)},jDefer:function(){var t=s.$A(arguments),e=this;return function(){return e.jDelay.apply(e,t)}},interval:function(){var t=s.$A(arguments),e=this,i=t.shift();return window.setInterval(function(){return e.apply(e,t)},i||0)}});var n={},o=navigator.userAgent.toLowerCase(),r=o.match(/(webkit|gecko|trident|presto)\/(\d+\.?\d*)/i),a=o.match(/(edge|opr)\/(\d+\.?\d*)/i)||o.match(/(crios|chrome|safari|firefox|opera|opr)\/(\d+\.?\d*)/i),h=o.match(/version\/(\d+\.?\d*)/i),l=document.documentElement.style;s.browser={features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector,fullScreen:!!(document.fullscreenEnabled||document.msFullscreenEnabled||document.exitFullscreen||document.cancelFullScreen||document.webkitexitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.oCancelFullScreen||document.msCancelFullScreen),xhr2:!!window.ProgressEvent&&!!window.FormData&&window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,transition:t("transition"),transform:t("transform"),perspective:t("perspective"),animation:t("animation"),requestAnimationFrame:!1,multibackground:!1,cssFilters:!1,canvas:!1,svg:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")}()},touchScreen:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}(),mobile:o.match(/(android|bb\d+|meego).+|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/)?!0:!1,engine:r&&r[1]?r[1].toLowerCase():window.opera?"presto":window.ActiveXObject?"trident":void 0!==document.getBoxObjectFor||null!=window.mozInnerScreenY?"gecko":null===window.WebKitPoint&&navigator.taintEnabled?"unknown":"webkit",version:r&&r[2]?parseFloat(r[2]):0,uaName:a&&a[1]?a[1].toLowerCase():"",uaVersion:a&&a[2]?parseFloat(a[2]):0,cssPrefix:"",cssDomPrefix:"",domPrefix:"",ieMode:0,platform:o.match(/ip(?:ad|od|hone)/)?"ios":(o.match(/(?:webos|android)/)||navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),backCompat:document.compatMode&&"backcompat"==document.compatMode.toLowerCase(),scrollbarsWidth:0,getDoc:function(){return document.compatMode&&"backcompat"==document.compatMode.toLowerCase()?document.body:document.documentElement},requestAnimationFrame:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||void 0,cancelAnimationFrame:window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||void 0,ready:!1,onready:function(){if(!s.browser.ready){var t,e;s.browser.ready=!0,s.body=s.$(document.body),s.win=s.$(window);try{var i=s.$new("div").jSetCss({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).jAppendTo(document.body);s.browser.scrollbarsWidth=i.offsetWidth-i.clientWidth,i.jRemove()}catch(o){}try{t=s.$new("div"),e=t.style,e.cssText="background:url(https://),url(https://),red url(https://)",s.browser.features.multibackground=/(url\s*\(.*?){3}/.test(e.background),e=null,t=null}catch(o){}s.browser.cssTransformProp||(s.browser.cssTransformProp=s.normalizeCSS("transform").dashize());try{t=s.$new("div"),t.style.cssText=s.normalizeCSS("filter").dashize()+":blur(2px);",s.browser.features.cssFilters=!!t.style.length&&(!s.browser.ieMode||s.browser.ieMode>9),t=null}catch(o){}s.browser.features.cssFilters||s.$(document.documentElement).jAddClass("no-cssfilters-magic");try{s.browser.features.canvas=function(){var t=s.$new("canvas");return!(!t.getContext||!t.getContext("2d"))}()}catch(o){}void 0===window.TransitionEvent&&void 0!==window.WebKitTransitionEvent&&(n.transitionend="webkitTransitionEnd"),s.Doc.jCallEvent.call(s.$(document),"domready")}}},function(){var t,e,i,n=[];switch(s.browser.engine){case"trident":s.browser.version||(s.browser.version=window.XMLHttpRequest?3:2);break;case"gecko":s.browser.version=a&&a[2]?parseFloat(a[2]):0}if(s.browser[s.browser.engine]=!0,a&&"crios"===a[1]&&(s.browser.uaName="chrome"),window.chrome&&(s.browser.chrome=!0),a&&"opr"===a[1]&&(s.browser.uaName="opera",s.browser.opera=!0),"safari"===s.browser.uaName&&h&&h[1]&&(s.browser.uaVersion=parseFloat(h[1])),"android"==s.browser.platform&&s.browser.webkit&&h&&h[1]&&(s.browser.androidBrowser=!0),t={gecko:["-moz-","Moz","moz"],webkit:["-webkit-","Webkit","webkit"],trident:["-ms-","ms","ms"],presto:["-o-","O","o"]}[s.browser.engine]||["","",""],s.browser.cssPrefix=t[0],s.browser.cssDomPrefix=t[1],s.browser.domPrefix=t[2],s.browser.ieMode=s.browser.trident?document.documentMode?document.documentMode:function(){var t=0;if(s.browser.backCompat)return 5;switch(s.browser.version){case 2:t=6;break;case 3:t=7}return t}():void 0,n.push(s.browser.platform+"-magic"),s.browser.mobile&&n.push("mobile-magic"),s.browser.androidBrowser&&n.push("android-browser-magic"),s.browser.ieMode)for(s.browser.uaName="ie",s.browser.uaVersion=s.browser.ieMode,n.push("ie"+s.browser.ieMode+"-magic"),e=11;e>s.browser.ieMode;e--)n.push("lt-ie"+e+"-magic");s.browser.webkit&&s.browser.version<536&&(s.browser.features.fullScreen=!1),s.browser.requestAnimationFrame&&s.browser.requestAnimationFrame.call(window,function(){s.browser.features.requestAnimationFrame=!0}),s.browser.features.svg?n.push("svg-magic"):n.push("no-svg-magic"),i=(document.documentElement.className||"").match(/\S+/g)||[],document.documentElement.className=s.$(i).concat(n).join(" ");try{document.documentElement.setAttribute("data-magic-ua",s.browser.uaName),document.documentElement.setAttribute("data-magic-ua-ver",s.browser.uaVersion)}catch(o){}s.browser.ieMode&&s.browser.ieMode<9&&(document.createElement("figure"),document.createElement("figcaption"))}(),function(){s.browser.fullScreen={capable:s.browser.features.fullScreen,enabled:function(){return!!(document.fullscreenElement||document[s.browser.domPrefix+"FullscreenElement"]||document.fullScreen||document.webkitIsFullScreen||document[s.browser.domPrefix+"FullScreen"])},request:function(t,e){e||(e={}),this.capable?(s.$(document).jAddEvent(this.changeEventName,this.onchange=function(t){this.enabled()?e.onEnter&&e.onEnter():(s.$(document).jRemoveEvent(this.changeEventName,this.onchange),e.onExit&&e.onExit())}.jBindAsEvent(this)),s.$(document).jAddEvent(this.errorEventName,this.onerror=function(t){e.fallback&&e.fallback(),s.$(document).jRemoveEvent(this.errorEventName,this.onerror)}.jBindAsEvent(this)),(t[s.browser.domPrefix+"RequestFullscreen"]||t[s.browser.domPrefix+"RequestFullScreen"]||t.requestFullscreen||function(){}).call(t)):e.fallback&&e.fallback()},cancel:(document.exitFullscreen||document.cancelFullScreen||document[s.browser.domPrefix+"ExitFullscreen"]||document[s.browser.domPrefix+"CancelFullScreen"]||function(){}).jBind(document),changeEventName:document.msExitFullscreen?"MSFullscreenChange":(document.exitFullscreen?"":s.browser.domPrefix)+"fullscreenchange",errorEventName:document.msExitFullscreen?"MSFullscreenError":(document.exitFullscreen?"":s.browser.domPrefix)+"fullscreenerror",prefix:s.browser.domPrefix,activeElement:null}}();var c=/\S+/g,d=/^(border(Top|Bottom|Left|Right)Width)|((padding|margin)(Top|Bottom|Left|Right))$/,u={"float":"undefined"==typeof l.styleFloat?"cssFloat":"styleFloat"},f={fontWeight:!0,lineHeight:!0,opacity:!0,zIndex:!0,zoom:!0},m=window.getComputedStyle?function(t,e){var i=window.getComputedStyle(t,null);return i?i.getPropertyValue(e)||i[e]:null}:function(t,e){var i=t.currentStyle,s=null;return s=i?i[e]:null,null==s&&t.style&&t.style[e]&&(s=t.style[e]),s};return s.normalizeCSS=e,s.Element={jHasClass:function(t){return!(t||"").has(" ")&&(this.className||"").has(t," ")},jAddClass:function(t){for(var e=(this.className||"").match(c)||[],i=(t||"").match(c)||[],n=i.length,o=0;n>o;o++)s.$(e).contains(i[o])||e.push(i[o]);return this.className=e.join(" "),this},jRemoveClass:function(t){for(var e,i=(this.className||"").match(c)||[],n=(t||"").match(c)||[],o=n.length,r=0;o>r;r++)(e=s.$(i).indexOf(n[r]))>-1&&i.splice(e,1);return this.className=t?i.join(" "):"",this},jToggleClass:function(t){return this.jHasClass(t)?this.jRemoveClass(t):this.jAddClass(t)},jGetCss:function(t){var i=t.jCamelize(),n=null;if(t=u[i]||(u[i]=e(i)),n=m(this,t),"auto"===n&&(n=null),null!==n){if("opacity"==t)return s.defined(n)?parseFloat(n):1;d.test(t)&&(n=parseInt(n,10)?n:"0px")}return n},jSetCssProp:function(t,i){var n=t.jCamelize();try{if("opacity"==t)return this.jSetOpacity(i),this;t=u[n]||(u[n]=e(n)),this.style[t]=i+("number"!=s.jTypeOf(i)||f[n]?"":"px")}catch(o){}return this},jSetCss:function(t){for(var e in t)this.jSetCssProp(e,t[e]);return this},jGetStyles:function(){var t={};return s.$A(arguments).jEach(function(e){t[e]=this.jGetCss(e)},this),t},jSetOpacity:function(t,e){return e=e||!1,this.style.opacity=t,t=parseInt(100*parseFloat(t)),e&&(0===t?"hidden"!=this.style.visibility&&(this.style.visibility="hidden"):"visible"!=this.style.visibility&&(this.style.visibility="visible")),s.browser.ieMode&&s.browser.ieMode<9&&(isNaN(t)?(this.style.filter=this.style.filter.replace(/progid:DXImageTransform.Microsoft.Alpha\(Opacity=\d*\)/i,"").jTrim(),""===this.style.filter&&this.style.removeAttribute("filter")):~this.style.filter.indexOf("Alpha")?this.style.filter=this.style.filter.replace(/Opacity=\d*/i,"Opacity="+t):this.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+t+")"),this},setProps:function(t){for(var e in t)"class"===e?this.jAddClass(""+t[e]):this.setAttribute(e,""+t[e]);return this},jGetTransitionDuration:function(){var t=0,e=0;return t=this.jGetCss("transition-duration"),e=this.jGetCss("transition-delay"),t=t.indexOf("ms")>-1?parseFloat(t):t.indexOf("s")>-1?1e3*parseFloat(t):0,e=e.indexOf("ms")>-1?parseFloat(e):e.indexOf("s")>-1?1e3*parseFloat(e):0,t+e},hide:function(){return this.jSetCss({display:"none",visibility:"hidden"})},show:function(){return this.jSetCss({display:"",visibility:"visible"})},jGetSize:function(){return{width:this.offsetWidth,height:this.offsetHeight}},getInnerSize:function(t){var e=this.jGetSize();return e.width-=parseFloat(this.jGetCss("border-left-width")||0)+parseFloat(this.jGetCss("border-right-width")||0),e.height-=parseFloat(this.jGetCss("border-top-width")||0)+parseFloat(this.jGetCss("border-bottom-width")||0),t||(e.width-=parseFloat(this.jGetCss("padding-left")||0)+parseFloat(this.jGetCss("padding-right")||0),e.height-=parseFloat(this.jGetCss("padding-top")||0)+parseFloat(this.jGetCss("padding-bottom")||0)),e},jGetScroll:function(){return{top:this.scrollTop,left:this.scrollLeft}},jGetFullScroll:function(){var t=this,e={top:0,left:0};do e.left+=t.scrollLeft||0,e.top+=t.scrollTop||0,t=t.parentNode;while(t);return e},jGetPosition:function(){var t=this,e=0,i=0;if(s.defined(document.documentElement.getBoundingClientRect)){var n=this.getBoundingClientRect(),o=s.$(document).jGetScroll(),r=s.browser.getDoc();return{top:n.top+o.y-r.clientTop,left:n.left+o.x-r.clientLeft}}do e+=t.offsetLeft||0,i+=t.offsetTop||0,t=t.offsetParent;while(t&&!/^(?:body|html)$/i.test(t.tagName));return{top:i,left:e}},jGetRect:function(){var t=this.jGetPosition(),e=this.jGetSize();return{top:t.top,bottom:t.top+e.height,left:t.left,right:t.left+e.width}},changeContent:function(t){try{this.innerHTML=t}catch(e){this.innerText=t}return this},jRemove:function(){return this.parentNode?this.parentNode.removeChild(this):this},kill:function(){return s.$A(this.childNodes).jEach(function(t){3!=t.nodeType&&8!=t.nodeType&&s.$(t).kill()}),this.jRemove(),this.jClearEvents(),this.$J_UUID&&(s.storage[this.$J_UUID]=null,delete s.storage[this.$J_UUID]),null},append:function(t,e){e=e||"bottom";var i=this.firstChild;return"top"==e&&i?this.insertBefore(t,i):this.appendChild(t),this},jAppendTo:function(t,e){s.$(t).append(this,e);return this},enclose:function(t){return this.append(t.parentNode.replaceChild(this,t)),this},hasChild:function(t){return"element"!==s.jTypeOf("string"==s.jTypeOf(t)?t=document.getElementById(t):t)?!1:this==t?!1:this.contains&&!s.browser.webkit419?this.contains(t):this.compareDocumentPosition?!!(16&this.compareDocumentPosition(t)):s.$A(this.byTag(t.tagName)).contains(t)}},s.Element.jGetStyle=s.Element.jGetCss,s.Element.jSetStyle=s.Element.jSetCss,window.Element||(window.Element=s.$F,s.browser.engine.webkit&&window.document.createElement("iframe"),window.Element.prototype=s.browser.engine.webkit?window["[[DOMElement.prototype]]"]:{}),s.implement(window.Element,{$J_TYPE:"element"}),s.Doc={jGetSize:function(){return s.browser.touchScreen||s.browser.presto925||s.browser.webkit419?{width:window.innerWidth,height:window.innerHeight}:{width:s.browser.getDoc().clientWidth,height:s.browser.getDoc().clientHeight}},jGetScroll:function(){return{x:window.pageXOffset||s.browser.getDoc().scrollLeft,y:window.pageYOffset||s.browser.getDoc().scrollTop}},jGetFullSize:function(){var t=this.jGetSize();return{width:Math.max(s.browser.getDoc().scrollWidth,t.width),height:Math.max(s.browser.getDoc().scrollHeight,t.height)}}},s.extend(document,{$J_TYPE:"document"}),s.extend(window,{$J_TYPE:"window"}),s.extend([s.Element,s.Doc],{jFetch:function(t,e){var i=s.getStorage(this.$J_UUID),n=i[t];return void 0!==e&&void 0===n&&(n=i[t]=e),s.defined(n)?n:null},jStore:function(t,e){var i=s.getStorage(this.$J_UUID);return i[t]=e,this},jDel:function(t){var e=s.getStorage(this.$J_UUID);return delete e[t],this}}),window.HTMLElement&&window.HTMLElement.prototype&&window.HTMLElement.prototype.getElementsByClassName||s.extend([s.Element,s.Doc],{getElementsByClassName:function(t){return s.$A(this.getElementsByTagName("*")).filter(function(e){try{return 1==e.nodeType&&e.className.has(t," ")}catch(i){}})}}),s.extend([s.Element,s.Doc],{byClass:function(){return this.getElementsByClassName(arguments[0])},byTag:function(){return this.getElementsByTagName(arguments[0])}}),s.browser.fullScreen.capable&&!document.requestFullScreen&&(s.Element.requestFullScreen=function(){s.browser.fullScreen.request(this)}),s.Event={$J_TYPE:"event",isQueueStopped:s.$false,stop:function(){return this.stopDistribution().stopDefaults()},stopDistribution:function(){return this.stopPropagation?this.stopPropagation():this.cancelBubble=!0,this},stopDefaults:function(){return this.preventDefault?this.preventDefault():this.returnValue=!1,this},stopQueue:function(){return this.isQueueStopped=s.$true,this},getClientXY:function(){var t;return t=/touch/i.test(this.type)?this.changedTouches[0]:this,s.defined(t)?{x:t.clientX,y:t.clientY}:{x:0,y:0}},jGetPageXY:function(){var t;return t=/touch/i.test(this.type)?this.changedTouches[0]:this,s.defined(t)?{x:t.pageX||t.clientX+s.browser.getDoc().scrollLeft,y:t.pageY||t.clientY+s.browser.getDoc().scrollTop}:{x:0,y:0}},getTarget:function(){for(var t=this.target||this.srcElement;t&&3==t.nodeType;)t=t.parentNode;return t},getRelated:function(){var t=null;switch(this.type){case"mouseover":case"pointerover":case"MSPointerOver":t=this.relatedTarget||this.fromElement;break;case"mouseout":case"pointerout":case"MSPointerOut":t=this.relatedTarget||this.toElement;break;default:return t}try{for(;t&&3==t.nodeType;)t=t.parentNode}catch(e){t=null}return t},getButton:function(){return this.which||void 0===this.button?this.which:1&this.button?1:2&this.button?3:4&this.button?2:0},isTouchEvent:function(){return this.pointerType&&("touch"===this.pointerType||this.pointerType===this.MSPOINTER_TYPE_TOUCH)||/touch/i.test(this.type)},isPrimaryTouch:function(){return this.pointerType?("touch"===this.pointerType||this.MSPOINTER_TYPE_TOUCH===this.pointerType)&&this.isPrimary:1===this.changedTouches.length&&(this.targetTouches.length?this.targetTouches[0].identifier==this.changedTouches[0].identifier:!0)}},s._event_add_="addEventListener",s._event_del_="removeEventListener",s._event_prefix_="",document.addEventListener||(s._event_add_="attachEvent",s._event_del_="detachEvent",s._event_prefix_="on"),s.Event.Custom={type:"",x:null,y:null,timeStamp:null,button:null,target:null,relatedTarget:null,$J_TYPE:"event.custom",isQueueStopped:s.$false,events:s.$([]),pushToEvents:function(t){var e=t;this.events.push(e)},stop:function(){return this.stopDistribution().stopDefaults()},stopDistribution:function(){return this.events.jEach(function(t){try{t.stopDistribution()}catch(e){}}),this},stopDefaults:function(){return this.events.jEach(function(t){try{t.stopDefaults()}catch(e){}}),this},stopQueue:function(){return this.isQueueStopped=s.$true,this},getClientXY:function(){return{x:this.clientX,y:this.clientY}},jGetPageXY:function(){return{x:this.x,y:this.y}},getTarget:function(){return this.target},getRelated:function(){return this.relatedTarget},getButton:function(){return this.button},getOriginalTarget:function(){return this.events.length>0?this.events[0].getTarget():void 0}},s.extend([s.Element,s.Doc],{jAddEvent:function(t,e,i,o){var r,a,h,l,c;return"string"==s.jTypeOf(t)&&(c=t.split(" "),c.length>1&&(t=c)),"array"==s.jTypeOf(t)?(s.$(t).jEach(this.jAddEvent.jBindAsEvent(this,e,i,o)),this):t&&e&&"string"==s.jTypeOf(t)&&"function"==s.jTypeOf(e)?"domready"==t&&s.browser.ready?(e.call(this),this):(t=n[t]||t,i=parseInt(i||50),e.$J_EUID||(e.$J_EUID=Math.floor(Math.random()*s.now())),r=s.Doc.jFetch.call(this,"_EVENTS_",{}),a=r[t],a||(r[t]=a=s.$([]),h=this,s.Event.Custom[t]?s.Event.Custom[t].handler.add.call(this,o):(a.handle=function(e){e=s.extend(e||window.e,{$J_TYPE:"event"}),s.Doc.jCallEvent.call(h,t,s.$(e))},this[s._event_add_](s._event_prefix_+t,a.handle,!1))),l={type:t,fn:e,priority:i,euid:e.$J_EUID},a.push(l),a.sort(function(t,e){return t.priority-e.priority}),this):this},jRemoveEvent:function(t){var e,i,o,r,a,h,l=s.Doc.jFetch.call(this,"_EVENTS_",{});if(a=arguments.length>1?arguments[1]:-100,"string"==s.jTypeOf(t)&&(h=t.split(" "),h.length>1&&(t=h)),"array"==s.jTypeOf(t))return s.$(t).jEach(this.jRemoveEvent.jBindAsEvent(this,a)),this;if(t=n[t]||t,!t||"string"!=s.jTypeOf(t)||!l||!l[t])return this;for(e=l[t]||[],o=0;o<e.length;o++)i=e[o],(-100==a||a&&a.$J_EUID===i.euid)&&(r=e.splice(o--,1));return 0===e.length&&(s.Event.Custom[t]?s.Event.Custom[t].handler.jRemove.call(this):this[s._event_del_](s._event_prefix_+t,e.handle,!1),delete l[t]),this},jCallEvent:function(t,e){var i,o,r=s.Doc.jFetch.call(this,"_EVENTS_",{});if(t=n[t]||t,!t||"string"!=s.jTypeOf(t)||!r||!r[t])return this;try{e=s.extend(e||{},{type:t})}catch(a){}for(void 0===e.timeStamp&&(e.timeStamp=s.now()),i=r[t]||[],o=0;o<i.length&&(!e.isQueueStopped||!e.isQueueStopped());o++)i[o].fn.call(this,e)},jRaiseEvent:function(t,e){var i,o="domready"==t?!1:!0,r=this;return t=n[t]||t,o?(r===document&&document.createEvent&&!r.dispatchEvent&&(r=document.documentElement),document.createEvent?(i=document.createEvent(t),i.initEvent(e,!0,!0)):(i=document.createEventObject(),i.eventType=t),document.createEvent?r.dispatchEvent(i):r.fireEvent("on"+e,i),i):(s.Doc.jCallEvent.call(this,t),this)},jClearEvents:function(){var t=s.Doc.jFetch.call(this,"_EVENTS_");if(!t)return this;for(var e in t)s.Doc.jRemoveEvent.call(this,e);return s.Doc.jDel.call(this,"_EVENTS_"),this}}),function(t){return"complete"===document.readyState?t.browser.onready.jDelay(1):void(t.browser.webkit&&t.browser.version<420?!function(){t.$(["loaded","complete"]).contains(document.readyState)?t.browser.onready():arguments.callee.jDelay(50)}():t.browser.trident&&t.browser.ieMode<9&&window==top?!function(){t.$try(function(){return t.browser.getDoc().doScroll("left"),!0})?t.browser.onready():arguments.callee.jDelay(50)}():(t.Doc.jAddEvent.call(t.$(document),"DOMContentLoaded",t.browser.onready),t.Doc.jAddEvent.call(t.$(window),"load",t.browser.onready)))}(i),s.Class=function(){var t=null,e=s.$A(arguments);"class"==s.jTypeOf(e[0])&&(t=e.shift());var i=function(){for(var t in this)this[t]=s.detach(this[t]);if(this.constructor.$parent){this.$parent={};var e=this.constructor.$parent;for(var i in e){var n=e[i];switch(s.jTypeOf(n)){case"function":this.$parent[i]=s.Class.wrap(this,n);break;case"object":this.$parent[i]=s.detach(n);break;case"array":this.$parent[i]=s.detach(n)}}}var o=this.init?this.init.apply(this,arguments):this;return delete this.caller,o};if(i.prototype.init||(i.prototype.init=s.$F),t){var n=function(){};n.prototype=t.prototype,i.prototype=new n,i.$parent={};for(var o in t.prototype)i.$parent[o]=t.prototype[o]}else i.$parent=null;return i.constructor=s.Class,i.prototype.constructor=i,s.extend(i.prototype,e[0]),s.extend(i,{$J_TYPE:"class"}),i},i.Class.wrap=function(t,e){return function(){var i=(this.caller,e.apply(t,arguments));return i}},function(t){var e=(t.$,5),i=300;t.Event.Custom.btnclick=new t.Class(t.extend(t.Event.Custom,{type:"btnclick",init:function(t,e){var i=e.jGetPageXY();this.x=i.x,this.y=i.y,this.clientX=e.clientX,this.clientY=e.clientY,this.timeStamp=e.timeStamp,this.button=e.getButton(),this.target=t,this.pushToEvents(e)}})),t.Event.Custom.btnclick.handler={options:{threshold:i,button:1},add:function(e){this.jStore("event:btnclick:options",t.extend(t.detach(t.Event.Custom.btnclick.handler.options),e||{})),this.jAddEvent("mousedown",t.Event.Custom.btnclick.handler.handle,1),this.jAddEvent("mouseup",t.Event.Custom.btnclick.handler.handle,1),this.jAddEvent("click",t.Event.Custom.btnclick.handler.onclick,1),t.browser.trident&&t.browser.ieMode<9&&this.jAddEvent("dblclick",t.Event.Custom.btnclick.handler.handle,1)},jRemove:function(){this.jRemoveEvent("mousedown",t.Event.Custom.btnclick.handler.handle),this.jRemoveEvent("mouseup",t.Event.Custom.btnclick.handler.handle),this.jRemoveEvent("click",t.Event.Custom.btnclick.handler.onclick),t.browser.trident&&t.browser.ieMode<9&&this.jRemoveEvent("dblclick",t.Event.Custom.btnclick.handler.handle)},onclick:function(t){t.stopDefaults()},handle:function(i){var s,n,o;if(n=this.jFetch("event:btnclick:options"),"dblclick"==i.type||i.getButton()==n.button){if(this.jFetch("event:btnclick:ignore"))return void this.jDel("event:btnclick:ignore");if("mousedown"==i.type)s=new t.Event.Custom.btnclick(this,i),this.jStore("event:btnclick:btnclickEvent",s);else if("mouseup"==i.type){if(s=this.jFetch("event:btnclick:btnclickEvent"),!s)return;o=i.jGetPageXY(),this.jDel("event:btnclick:btnclickEvent"),s.pushToEvents(i),i.timeStamp-s.timeStamp<=n.threshold&&Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2))<=e&&this.jCallEvent("btnclick",s),document.jCallEvent("mouseup",i)}else"dblclick"==i.type&&(s=new t.Event.Custom.btnclick(this,i),this.jCallEvent("btnclick",s))}}}}(i),function(t){var e=t.$;t.Event.Custom.mousedrag=new t.Class(t.extend(t.Event.Custom,{type:"mousedrag",state:"dragstart",dragged:!1,init:function(t,e,i){var s=e.jGetPageXY();this.x=s.x,this.y=s.y,this.clientX=e.clientX,this.clientY=e.clientY,this.timeStamp=e.timeStamp,this.button=e.getButton(),this.target=t,this.pushToEvents(e),this.state=i}})),t.Event.Custom.mousedrag.handler={add:function(){var e=t.Event.Custom.mousedrag.handler.handleMouseMove.jBindAsEvent(this),i=t.Event.Custom.mousedrag.handler.handleMouseUp.jBindAsEvent(this);this.jAddEvent("mousedown",t.Event.Custom.mousedrag.handler.handleMouseDown,1),this.jAddEvent("mouseup",t.Event.Custom.mousedrag.handler.handleMouseUp,1),document.jAddEvent("mousemove",e,1),document.jAddEvent("mouseup",i,1),this.jStore("event:mousedrag:listeners:document:move",e),this.jStore("event:mousedrag:listeners:document:end",i)},jRemove:function(){this.jRemoveEvent("mousedown",t.Event.Custom.mousedrag.handler.handleMouseDown),this.jRemoveEvent("mouseup",t.Event.Custom.mousedrag.handler.handleMouseUp),e(document).jRemoveEvent("mousemove",this.jFetch("event:mousedrag:listeners:document:move")||t.$F),e(document).jRemoveEvent("mouseup",this.jFetch("event:mousedrag:listeners:document:end")||t.$F),this.jDel("event:mousedrag:listeners:document:move"),this.jDel("event:mousedrag:listeners:document:end")},handleMouseDown:function(e){var i;1==e.getButton()&&(i=new t.Event.Custom.mousedrag(this,e,"dragstart"),this.jStore("event:mousedrag:dragstart",i))},handleMouseUp:function(e){var i;i=this.jFetch("event:mousedrag:dragstart"),i&&(e.stopDefaults(),i=new t.Event.Custom.mousedrag(this,e,"dragend"),this.jDel("event:mousedrag:dragstart"),this.jCallEvent("mousedrag",i))},handleMouseMove:function(e){var i;i=this.jFetch("event:mousedrag:dragstart"),i&&(e.stopDefaults(),i.dragged||(i.dragged=!0,this.jCallEvent("mousedrag",i)),i=new t.Event.Custom.mousedrag(this,e,"dragmove"),this.jCallEvent("mousedrag",i))}}}(i),function(t){t.$;t.Event.Custom.dblbtnclick=new t.Class(t.extend(t.Event.Custom,{type:"dblbtnclick",timedout:!1,tm:null,init:function(t,e){var i=e.jGetPageXY();this.x=i.x,this.y=i.y,this.clientX=e.clientX,this.clientY=e.clientY,this.timeStamp=e.timeStamp,this.button=e.getButton(),this.target=t,this.pushToEvents(e)}})),t.Event.Custom.dblbtnclick.handler={options:{threshold:200},add:function(e){this.jStore("event:dblbtnclick:options",t.extend(t.detach(t.Event.Custom.dblbtnclick.handler.options),e||{})),this.jAddEvent("btnclick",t.Event.Custom.dblbtnclick.handler.handle,1)},jRemove:function(){this.jRemoveEvent("btnclick",t.Event.Custom.dblbtnclick.handler.handle)},handle:function(e){var i,s;i=this.jFetch("event:dblbtnclick:event"),s=this.jFetch("event:dblbtnclick:options"),i?(clearTimeout(i.tm),this.jDel("event:dblbtnclick:event"),i.timedout||(i.pushToEvents(e),e.stopQueue().stop(),this.jCallEvent("dblbtnclick",i))):(i=new t.Event.Custom.dblbtnclick(this,e),i.tm=setTimeout(function(){i.timedout=!0,e.isQueueStopped=t.$false,this.jCallEvent("btnclick",e),this.jDel("event:dblbtnclick:event")}.jBind(this),s.threshold+10),this.jStore("event:dblbtnclick:event",i),e.stopQueue())}}}(i),function(t){function e(t){return t.pointerType?("touch"===t.pointerType||t.MSPOINTER_TYPE_TOUCH===t.pointerType)&&t.isPrimary:1===t.changedTouches.length&&(t.targetTouches.length?t.targetTouches[0].identifier==t.changedTouches[0].identifier:!0);
}function i(t){return t.pointerType?"touch"===t.pointerType||t.MSPOINTER_TYPE_TOUCH===t.pointerType?t.pointerId:null:t.changedTouches[0].identifier}function s(t){return t.pointerType?"touch"===t.pointerType||t.MSPOINTER_TYPE_TOUCH===t.pointerType?t:null:t.changedTouches[0]}t.$;t.Event.Custom.tap=new t.Class(t.extend(t.Event.Custom,{type:"tap",id:null,init:function(t,e){var i=s(e);this.id=i.pointerId||i.identifier,this.x=i.pageX,this.y=i.pageY,this.pageX=i.pageX,this.pageY=i.pageY,this.clientX=i.clientX,this.clientY=i.clientY,this.timeStamp=e.timeStamp,this.button=0,this.target=t,this.pushToEvents(e)}}));var n=10,o=200;t.Event.Custom.tap.handler={add:function(e){this.jAddEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],t.Event.Custom.tap.handler.onTouchStart,1),this.jAddEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],t.Event.Custom.tap.handler.onTouchEnd,1),this.jAddEvent("click",t.Event.Custom.tap.handler.onClick,1)},jRemove:function(){this.jRemoveEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],t.Event.Custom.tap.handler.onTouchStart),this.jRemoveEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],t.Event.Custom.tap.handler.onTouchEnd),this.jRemoveEvent("click",t.Event.Custom.tap.handler.onClick)},onClick:function(t){t.stopDefaults()},onTouchStart:function(i){return e(i)?(this.jStore("event:tap:event",new t.Event.Custom.tap(this,i)),void this.jStore("event:btnclick:ignore",!0)):void this.jDel("event:tap:event")},onTouchEnd:function(r){var a=(t.now(),this.jFetch("event:tap:event"));this.jFetch("event:tap:options");a&&e(r)&&(this.jDel("event:tap:event"),a.id==i(r)&&r.timeStamp-a.timeStamp<=o&&Math.sqrt(Math.pow(s(r).pageX-a.x,2)+Math.pow(s(r).pageY-a.y,2))<=n&&(this.jDel("event:btnclick:btnclickEvent"),r.stop(),a.pushToEvents(r),this.jCallEvent("tap",a)))}}}(i),s.Event.Custom.dbltap=new s.Class(s.extend(s.Event.Custom,{type:"dbltap",timedout:!1,tm:null,init:function(t,e){this.x=e.x,this.y=e.y,this.clientX=e.clientX,this.clientY=e.clientY,this.timeStamp=e.timeStamp,this.button=0,this.target=t,this.pushToEvents(e)}})),s.Event.Custom.dbltap.handler={options:{threshold:300},add:function(t){this.jStore("event:dbltap:options",s.extend(s.detach(s.Event.Custom.dbltap.handler.options),t||{})),this.jAddEvent("tap",s.Event.Custom.dbltap.handler.handle,1)},jRemove:function(){this.jRemoveEvent("tap",s.Event.Custom.dbltap.handler.handle)},handle:function(t){var e,i;e=this.jFetch("event:dbltap:event"),i=this.jFetch("event:dbltap:options"),e?(clearTimeout(e.tm),this.jDel("event:dbltap:event"),e.timedout||(e.pushToEvents(t),t.stopQueue().stop(),this.jCallEvent("dbltap",e))):(e=new s.Event.Custom.dbltap(this,t),e.tm=setTimeout(function(){e.timedout=!0,t.isQueueStopped=s.$false,this.jCallEvent("tap",t)}.jBind(this),i.threshold+10),this.jStore("event:dbltap:event",e),t.stopQueue())}},function(t){function e(t){return t.pointerType?("touch"===t.pointerType||t.MSPOINTER_TYPE_TOUCH===t.pointerType)&&t.isPrimary:1===t.changedTouches.length&&(t.targetTouches.length?t.targetTouches[0].identifier==t.changedTouches[0].identifier:!0)}function i(t){return t.pointerType?"touch"===t.pointerType||t.MSPOINTER_TYPE_TOUCH===t.pointerType?t.pointerId:null:t.changedTouches[0].identifier}function s(t){return t.pointerType?"touch"===t.pointerType||t.MSPOINTER_TYPE_TOUCH===t.pointerType?t:null:t.changedTouches[0]}var n=t.$,o=10;t.Event.Custom.touchdrag=new t.Class(t.extend(t.Event.Custom,{type:"touchdrag",state:"dragstart",id:null,dragged:!1,init:function(t,e,i){var n=s(e);this.id=n.pointerId||n.identifier,this.clientX=n.clientX,this.clientY=n.clientY,this.pageX=n.pageX,this.pageY=n.pageY,this.x=n.pageX,this.y=n.pageY,this.timeStamp=e.timeStamp,this.button=0,this.target=t,this.pushToEvents(e),this.state=i}})),t.Event.Custom.touchdrag.handler={add:function(){var e=t.Event.Custom.touchdrag.handler.onTouchMove.jBind(this),i=t.Event.Custom.touchdrag.handler.onTouchEnd.jBind(this);this.jAddEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],t.Event.Custom.touchdrag.handler.onTouchStart,1),this.jAddEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],t.Event.Custom.touchdrag.handler.onTouchEnd,1),this.jAddEvent(["touchmove",window.navigator.pointerEnabled?"pointermove":"MSPointerMove"],t.Event.Custom.touchdrag.handler.onTouchMove,1),this.jStore("event:touchdrag:listeners:document:move",e),this.jStore("event:touchdrag:listeners:document:end",i),n(document).jAddEvent(window.navigator.pointerEnabled?"pointermove":"MSPointerMove",e,1),n(document).jAddEvent(window.navigator.pointerEnabled?"pointerup":"MSPointerUp",i,1)},jRemove:function(){this.jRemoveEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],t.Event.Custom.touchdrag.handler.onTouchStart),this.jRemoveEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],t.Event.Custom.touchdrag.handler.onTouchEnd),this.jRemoveEvent(["touchmove",window.navigator.pointerEnabled?"pointermove":"MSPointerMove"],t.Event.Custom.touchdrag.handler.onTouchMove),n(document).jRemoveEvent(window.navigator.pointerEnabled?"pointermove":"MSPointerMove",this.jFetch("event:touchdrag:listeners:document:move")||t.$F,1),n(document).jRemoveEvent(window.navigator.pointerEnabled?"pointerup":"MSPointerUp",this.jFetch("event:touchdrag:listeners:document:end")||t.$F,1),this.jDel("event:touchdrag:listeners:document:move"),this.jDel("event:touchdrag:listeners:document:end")},onTouchStart:function(i){var s;e(i)&&(s=new t.Event.Custom.touchdrag(this,i,"dragstart"),this.jStore("event:touchdrag:dragstart",s))},onTouchEnd:function(e){var s;s=this.jFetch("event:touchdrag:dragstart"),s&&s.dragged&&s.id==i(e)&&(s=new t.Event.Custom.touchdrag(this,e,"dragend"),this.jDel("event:touchdrag:dragstart"),this.jCallEvent("touchdrag",s))},onTouchMove:function(n){var r;if(r=this.jFetch("event:touchdrag:dragstart"),r&&e(n)){if(r.id!=i(n))return void this.jDel("event:touchdrag:dragstart");!r.dragged&&Math.sqrt(Math.pow(s(n).pageX-r.x,2)+Math.pow(s(n).pageY-r.y,2))>o&&(r.dragged=!0,this.jCallEvent("touchdrag",r)),r.dragged&&(r=new t.Event.Custom.touchdrag(this,n,"dragmove"),this.jCallEvent("touchdrag",r))}}}}(i),s.Event.Custom.touchpinch=new s.Class(s.extend(s.Event.Custom,{type:"touchpinch",scale:1,previousScale:1,curScale:1,state:"pinchstart",init:function(t,e){this.timeStamp=e.timeStamp,this.button=0,this.target=t,this.x=e.touches[0].clientX+(e.touches[1].clientX-e.touches[0].clientX)/2,this.y=e.touches[0].clientY+(e.touches[1].clientY-e.touches[0].clientY)/2,this._initialDistance=Math.sqrt(Math.pow(e.touches[0].clientX-e.touches[1].clientX,2)+Math.pow(e.touches[0].clientY-e.touches[1].clientY,2)),this.pushToEvents(e)},update:function(t){var e;this.state="pinchupdate",t.changedTouches[0].identifier==this.events[0].touches[0].identifier&&t.changedTouches[1].identifier==this.events[0].touches[1].identifier&&(e=Math.sqrt(Math.pow(t.changedTouches[0].clientX-t.changedTouches[1].clientX,2)+Math.pow(t.changedTouches[0].clientY-t.changedTouches[1].clientY,2)),this.previousScale=this.scale,this.scale=e/this._initialDistance,this.curScale=this.scale/this.previousScale,this.x=t.changedTouches[0].clientX+(t.changedTouches[1].clientX-t.changedTouches[0].clientX)/2,this.y=t.changedTouches[0].clientY+(t.changedTouches[1].clientY-t.changedTouches[0].clientY)/2,this.pushToEvents(t))}})),s.Event.Custom.touchpinch.handler={add:function(){this.jAddEvent("touchstart",s.Event.Custom.touchpinch.handler.handleTouchStart,1),this.jAddEvent("touchend",s.Event.Custom.touchpinch.handler.handleTouchEnd,1),this.jAddEvent("touchmove",s.Event.Custom.touchpinch.handler.handleTouchMove,1)},jRemove:function(){this.jRemoveEvent("touchstart",s.Event.Custom.touchpinch.handler.handleTouchStart),this.jRemoveEvent("touchend",s.Event.Custom.touchpinch.handler.handleTouchEnd),this.jRemoveEvent("touchmove",s.Event.Custom.touchpinch.handler.handleTouchMove)},handleTouchStart:function(t){var e;2==t.touches.length&&(t.stopDefaults(),e=new s.Event.Custom.touchpinch(this,t),this.jStore("event:touchpinch:event",e))},handleTouchEnd:function(t){var e;e=this.jFetch("event:touchpinch:event"),e&&(t.stopDefaults(),this.jDel("event:touchpinch:event"))},handleTouchMove:function(t){var e;e=this.jFetch("event:touchpinch:event"),e&&(t.stopDefaults(),e.update(t),this.jCallEvent("touchpinch",e))}},function(t){function e(){s=null}function i(e,i){return e>50||1===i&&!("win"==t.browser.platform&&1>e)||0===e%12||0==e%4.000244140625}t.$;t.Event.Custom.mousescroll=new t.Class(t.extend(t.Event.Custom,{type:"mousescroll",init:function(t,e,i,s,n,o,r){var a=e.jGetPageXY();this.x=a.x,this.y=a.y,this.timeStamp=e.timeStamp,this.target=t,this.delta=i||0,this.deltaX=s||0,this.deltaY=n||0,this.deltaZ=o||0,this.deltaFactor=r||0,this.deltaMode=e.deltaMode||0,this.isMouse=!1,this.pushToEvents(e)}}));var s,n;t.Event.Custom.mousescroll.handler={eventType:"onwheel"in document||t.browser.ieMode>8?"wheel":"mousewheel",add:function(){this.jAddEvent(t.Event.Custom.mousescroll.handler.eventType,t.Event.Custom.mousescroll.handler.handle,1)},jRemove:function(){this.jRemoveEvent(t.Event.Custom.mousescroll.handler.eventType,t.Event.Custom.mousescroll.handler.handle,1)},handle:function(o){var r,a,h=0,l=0,c=0,d=0;o.detail&&(c=-1*o.detail),void 0!==o.wheelDelta&&(c=o.wheelDelta),void 0!==o.wheelDeltaY&&(c=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(l=-1*o.wheelDeltaX),o.deltaY&&(c=-1*o.deltaY),o.deltaX&&(l=o.deltaX),(0!==c||0!==l)&&(h=0===c?l:c,d=Math.max(Math.abs(c),Math.abs(l)),(!s||s>d)&&(s=d),r=h>0?"floor":"ceil",h=Math[r](h/s),l=Math[r](l/s),c=Math[r](c/s),n&&clearTimeout(n),n=setTimeout(e,200),a=new t.Event.Custom.mousescroll(this,o,h,l,c,0,s),a.isMouse=i(s,o.deltaMode||0),this.jCallEvent("mousescroll",a))}}}(i),s.win=s.$(window),s.doc=s.$(document),i}(),function(t){if(!t)throw"MagicJS not found";var e=t.$,s=window.URL||window.webkitURL||null;i.ImageLoader=new t.Class({img:null,ready:!1,options:{onprogress:t.$F,onload:t.$F,onabort:t.$F,onerror:t.$F,oncomplete:t.$F,onxhrerror:t.$F,xhr:!1,progressiveLoad:!0},size:null,_timer:null,loadedBytes:0,_handlers:{onprogress:function(t){t.target&&(200===t.target.status||304===t.target.status)&&t.lengthComputable&&(this.options.onprogress.jBind(null,(t.loaded-(this.options.progressiveLoad?this.loadedBytes:0))/t.total).jDelay(1),this.loadedBytes=t.loaded)},onload:function(t){t&&e(t).stop(),this._unbind(),this.ready||(this.ready=!0,this._cleanup(),!this.options.xhr&&this.options.onprogress.jBind(null,1).jDelay(1),this.options.onload.jBind(null,this).jDelay(1),this.options.oncomplete.jBind(null,this).jDelay(1))},onabort:function(t){t&&e(t).stop(),this._unbind(),this.ready=!1,this._cleanup(),this.options.onabort.jBind(null,this).jDelay(1),this.options.oncomplete.jBind(null,this).jDelay(1)},onerror:function(t){t&&e(t).stop(),this._unbind(),this.ready=!1,this._cleanup(),this.options.onerror.jBind(null,this).jDelay(1),this.options.oncomplete.jBind(null,this).jDelay(1)}},_bind:function(){e(["load","abort","error"]).jEach(function(t){this.img.jAddEvent(t,this._handlers["on"+t].jBindAsEvent(this).jDefer(1))},this)},_unbind:function(){if(this._timer){try{clearTimeout(this._timer)}catch(t){}this._timer=null}e(["load","abort","error"]).jEach(function(t){this.img.jRemoveEvent(t)},this)},_cleanup:function(){if(this.jGetSize(),this.img.jFetch("new")){var t=this.img.parentNode;this.img.jRemove().jDel("new").jSetCss({position:"static",top:"auto"}),t.kill()}},loadBlob:function(i){var n,o=new XMLHttpRequest;e(["abort","progress"]).jEach(function(t){o["on"+t]=e(function(e){this._handlers["on"+t].call(this,e)}).jBind(this)},this),o.onerror=e(function(){this.options.onxhrerror.jBind(null,this).jDelay(1),this.options.xhr=!1,this._bind(),this.img.src=i}).jBind(this),o.onload=e(function(){return 200!==o.status&&304!==o.status?void this._handlers.onerror.call(this):(n=o.response,this._bind(),void(!s||t.browser.trident||"ios"===t.browser.platform&&t.browser.version<537?this.img.src=i:this.img.setAttribute("src",s.createObjectURL(n))))}).jBind(this),o.open("GET",i),o.responseType="blob",o.send()},init:function(i,s){if(this.options=t.extend(this.options,s),this.img=e(i)||t.$new("img",{},{"max-width":"none","max-height":"none"}).jAppendTo(t.$new("div").jAddClass("magic-temporary-img").jSetCss({position:"absolute",top:-1e4,width:10,height:10,overflow:"hidden"}).jAppendTo(document.body)).jStore("new",!0),t.browser.features.xhr2&&this.options.xhr&&"string"==t.jTypeOf(i))return void this.loadBlob(i);var n=function(){this.isReady()?this._handlers.onload.call(this):this._handlers.onerror.call(this),n=null}.jBind(this);this._bind(),"string"==t.jTypeOf(i)?this.img.src=i:(t.browser.trident&&5==t.browser.version&&t.browser.ieMode<9&&(this.img.onreadystatechange=function(){/loaded|complete/.test(this.img.readyState)&&(this.img.onreadystatechange=null,n&&n())}.jBind(this)),this.img.src=i.getAttribute("src")),this.img&&this.img.complete&&n&&(this._timer=n.jDelay(100))},destroy:function(){return this._unbind(),this._cleanup(),this.ready=!1,this},isReady:function(){var t=this.img;return t.naturalWidth?t.naturalWidth>0:t.readyState?"complete"==t.readyState:t.width>0},jGetSize:function(){return this.size||(this.size={width:this.img.naturalWidth||this.img.width,height:this.img.naturalHeight||this.img.height})}})}(i),function(t){if(!t)throw"MagicJS not found";if(!t.FX){var e=t.$;t.FX=new t.Class({init:function(e,i){var s;this.el=t.$(e),this.options=t.extend(this.options,i),this.timer=!1,this.easeFn=this.cubicBezierAtTime,s=t.FX.Transition[this.options.transition]||this.options.transition,"function"===t.jTypeOf(s)?this.easeFn=s:this.cubicBezier=this.parseCubicBezier(s)||this.parseCubicBezier("ease"),"string"==t.jTypeOf(this.options.cycles)&&(this.options.cycles="infinite"===this.options.cycles?1/0:parseInt(this.options.cycles)||1)},options:{fps:60,duration:600,transition:"ease",cycles:1,direction:"normal",onStart:t.$F,onComplete:t.$F,onBeforeRender:t.$F,onAfterRender:t.$F,forceAnimation:!1,roundCss:!1},styles:null,cubicBezier:null,easeFn:null,setTransition:function(e){this.options.transition=e,e=t.FX.Transition[this.options.transition]||this.options.transition,"function"===t.jTypeOf(e)?this.easeFn=e:(this.easeFn=this.cubicBezierAtTime,this.cubicBezier=this.parseCubicBezier(e)||this.parseCubicBezier("ease"))},start:function(e){var i,s=/\%$/;this.styles=e||{},this.cycle=0,this.state=0,this.curFrame=0,this.pStyles={},this.alternate="alternate"===this.options.direction||"alternate-reverse"===this.options.direction,this.continuous="continuous"===this.options.direction||"continuous-reverse"===this.options.direction;for(i in this.styles)s.test(this.styles[i][0])&&(this.pStyles[i]=!0),("reverse"===this.options.direction||"alternate-reverse"===this.options.direction||"continuous-reverse"===this.options.direction)&&this.styles[i].reverse();return this.startTime=t.now(),this.finishTime=this.startTime+this.options.duration,this.options.onStart.call(),0===this.options.duration?(this.render(1),this.options.onComplete.call()):(this.loopBind=this.loop.jBind(this),!this.options.forceAnimation&&t.browser.features.requestAnimationFrame?this.timer=t.browser.requestAnimationFrame.call(window,this.loopBind):this.timer=this.loopBind.interval(Math.round(1e3/this.options.fps))),this},stopAnimation:function(){this.timer&&(!this.options.forceAnimation&&t.browser.features.requestAnimationFrame&&t.browser.cancelAnimationFrame?t.browser.cancelAnimationFrame.call(window,this.timer):clearInterval(this.timer),this.timer=!1)},stop:function(e){return e=t.defined(e)?e:!1,this.stopAnimation(),e&&(this.render(1),this.options.onComplete.jDelay(10)),this},calc:function(t,e,i){return t=parseFloat(t),e=parseFloat(e),(e-t)*i+t},loop:function(){var e=t.now(),i=(e-this.startTime)/this.options.duration,s=Math.floor(i);if(e>=this.finishTime&&s>=this.options.cycles)return this.stopAnimation(),this.render(1),this.options.onComplete.jDelay(10),this;if(this.alternate&&this.cycle<s)for(var n in this.styles)this.styles[n].reverse();this.cycle=s,!this.options.forceAnimation&&t.browser.features.requestAnimationFrame&&(this.timer=t.browser.requestAnimationFrame.call(window,this.loopBind)),this.render((this.continuous?s:0)+this.easeFn(i%1))},render:function(t){var e={};for(var i in this.styles)"opacity"===i?e[i]=Math.round(100*this.calc(this.styles[i][0],this.styles[i][1],t))/100:(e[i]=this.calc(this.styles[i][0],this.styles[i][1],t),this.pStyles[i]&&(e[i]+="%"));this.options.onBeforeRender(e,this.el),this.set(e),this.options.onAfterRender(e,this.el)},set:function(t){return this.el.jSetCss(t)},parseCubicBezier:function(i){var s,n=null;if("string"!==t.jTypeOf(i))return null;switch(i){case"linear":n=e([0,0,1,1]);break;case"ease":n=e([.25,.1,.25,1]);break;case"ease-in":n=e([.42,0,1,1]);break;case"ease-out":n=e([0,0,.58,1]);break;case"ease-in-out":n=e([.42,0,.58,1]);break;case"easeInSine":n=e([.47,0,.745,.715]);break;case"easeOutSine":n=e([.39,.575,.565,1]);break;case"easeInOutSine":n=e([.445,.05,.55,.95]);break;case"easeInQuad":n=e([.55,.085,.68,.53]);break;case"easeOutQuad":n=e([.25,.46,.45,.94]);break;case"easeInOutQuad":n=e([.455,.03,.515,.955]);break;case"easeInCubic":n=e([.55,.055,.675,.19]);break;case"easeOutCubic":n=e([.215,.61,.355,1]);break;case"easeInOutCubic":n=e([.645,.045,.355,1]);break;case"easeInQuart":n=e([.895,.03,.685,.22]);break;case"easeOutQuart":n=e([.165,.84,.44,1]);break;case"easeInOutQuart":n=e([.77,0,.175,1]);break;case"easeInQuint":n=e([.755,.05,.855,.06]);break;case"easeOutQuint":n=e([.23,1,.32,1]);break;case"easeInOutQuint":n=e([.86,0,.07,1]);break;case"easeInExpo":n=e([.95,.05,.795,.035]);break;case"easeOutExpo":n=e([.19,1,.22,1]);break;case"easeInOutExpo":n=e([1,0,0,1]);break;case"easeInCirc":n=e([.6,.04,.98,.335]);break;case"easeOutCirc":n=e([.075,.82,.165,1]);break;case"easeInOutCirc":n=e([.785,.135,.15,.86]);break;case"easeInBack":n=e([.6,-.28,.735,.045]);break;case"easeOutBack":n=e([.175,.885,.32,1.275]);break;case"easeInOutBack":n=e([.68,-.55,.265,1.55]);break;default:if(i=i.replace(/\s/g,""),i.match(/^cubic-bezier\((?:-?[0-9\.]{0,}[0-9]{1,},){3}(?:-?[0-9\.]{0,}[0-9]{1,})\)$/))for(n=i.replace(/^cubic-bezier\s*\(|\)$/g,"").split(","),s=n.length-1;s>=0;s--)n[s]=parseFloat(n[s])}return e(n)},cubicBezierAtTime:function(t){function e(t){return((a*t+h)*t+l)*t}function i(t){return((c*t+d)*t+u)*t}function s(t){return(3*a*t+2*h)*t+l}function n(t){return 1/(200*t)}function o(t,e){return i(r(t,e))}function r(t,i){function n(t){return t>=0?t:0-t}var o,r,a,h,l,c;for(a=t,c=0;8>c;c++){if(h=e(a)-t,n(h)<i)return a;if(l=s(a),n(l)<1e-6)break;a-=h/l}if(o=0,r=1,a=t,o>a)return o;if(a>r)return r;for(;r>o;){if(h=e(a),n(h-t)<i)return a;t>h?o=a:r=a,a=.5*(r-o)+o}return a}var a=0,h=0,l=0,c=0,d=0,u=0,f=this.options.duration;return l=3*this.cubicBezier[0],h=3*(this.cubicBezier[2]-this.cubicBezier[0])-l,a=1-l-h,u=3*this.cubicBezier[1],d=3*(this.cubicBezier[3]-this.cubicBezier[1])-u,c=1-u-d,o(t,n(f))}}),t.FX.Transition={linear:"linear",sineIn:"easeInSine",sineOut:"easeOutSine",expoIn:"easeInExpo",expoOut:"easeOutExpo",quadIn:"easeInQuad",quadOut:"easeOutQuad",cubicIn:"easeInCubic",cubicOut:"easeOutCubic",backIn:"easeInBack",backOut:"easeOutBack",elasticIn:function(t,e){return e=e||[],Math.pow(2,10*--t)*Math.cos(20*t*Math.PI*(e[0]||1)/3)},elasticOut:function(e,i){return 1-t.FX.Transition.elasticIn(1-e,i)},bounceIn:function(t){for(var e=0,i=1;1;e+=i,i/=2)if(t>=(7-4*e)/11)return i*i-Math.pow((11-6*e-11*t)/4,2)},bounceOut:function(e){return 1-t.FX.Transition.bounceIn(1-e)},none:function(t){return 0}}}}(i),function(t){if(!t)throw"MagicJS not found";if(!t.PFX){t.$;t.PFX=new t.Class(t.FX,{init:function(e,i){this.el_arr=e,this.options=t.extend(this.options,i),this.timer=!1,this.$parent.init()},start:function(t){var e,i,s=/\%$/,n=t.length;for(this.styles_arr=t,this.pStyles_arr=new Array(n),i=0;n>i;i++){this.pStyles_arr[i]={};for(e in t[i])s.test(t[i][e][0])&&(this.pStyles_arr[i][e]=!0),("reverse"===this.options.direction||"alternate-reverse"===this.options.direction||"continuous-reverse"===this.options.direction)&&this.styles_arr[i][e].reverse()}return this.$parent.start({}),this},render:function(e){for(var i=0;i<this.el_arr.length;i++)this.el=t.$(this.el_arr[i]),this.styles=this.styles_arr[i],this.pStyles=this.pStyles_arr[i],this.$parent.render(e)}})}}(i),function(t){if(!t)throw"MagicJS not found";if(!t.Tooltip){t.$;t.Tooltip=function(e,i){var s=this.tooltip=t.$new("div",null,{position:"absolute","z-index":999}).jAddClass("MagicToolboxTooltip");t.$(e).jAddEvent("mouseover",function(){s.jAppendTo(document.body)}),t.$(e).jAddEvent("mouseout",function(){s.jRemove()}),t.$(e).jAddEvent("mousemove",function(e){function i(t,e,i){return(t-e)/2>i?i:i>(t+e)/2?i-e:(t-e)/2}var n=20,o=t.$(e).jGetPageXY(),r=s.jGetSize(),a=t.$(window).jGetSize(),h=t.$(window).jGetScroll();s.jSetCss({left:h.x+i(a.width,r.width+2*n,o.x-h.x)+n,top:h.y+i(a.height,r.height+2*n,o.y-h.y)+n})}),this.text(i)},t.Tooltip.prototype.text=function(t){this.tooltip.firstChild&&this.tooltip.removeChild(this.tooltip.firstChild),this.tooltip.append(document.createTextNode(t))}}}(i),function(t){if(!t)throw"MagicJS not found";if(!t.MessageBox){t.$;t.Message=function(e,i,s,n){this.hideTimer=null,this.messageBox=t.$new("span",null,{position:"absolute","z-index":999,visibility:"hidden",opacity:.8}).jAddClass(n||"").jAppendTo(s||document.body),this.setMessage(e),this.show(i)},t.Message.prototype.show=function(e){this.messageBox.show(),this.hideTimer=this.hide.jBind(this).jDelay(t.ifndef(e,5e3))},t.Message.prototype.hide=function(e){clearTimeout(this.hideTimer),this.hideTimer=null,this.messageBox&&!this.hideFX&&(this.hideFX=new i.FX(this.messageBox,{duration:t.ifndef(e,500),onComplete:function(){this.messageBox.kill(),delete this.messageBox,this.hideFX=null}.jBind(this)}).start({opacity:[this.messageBox.jGetCss("opacity"),0]}))},t.Message.prototype.setMessage=function(t){this.messageBox.firstChild&&this.tooltip.removeChild(this.messageBox.firstChild),this.messageBox.append(document.createTextNode(t))}}}(i),function(t){if(!t)throw"MagicJS not found";if(!t.Options){var e=t.$,i=null,s={"boolean":1,array:2,number:3,"function":4,string:100},n={"boolean":function(s,n,o){if("boolean"!=t.jTypeOf(n)){if(o||"string"!=t.jTypeOf(n))return!1;if(!/^(true|false)$/.test(n))return!1;n=n.jToBool()}return s.hasOwnProperty("enum")&&!e(s["enum"]).contains(n)?!1:(i=n,!0)},string:function(s,n,o){return"string"!==t.jTypeOf(n)?!1:s.hasOwnProperty("enum")&&!e(s["enum"]).contains(n)?!1:(i=""+n,!0)},number:function(s,n,o){var r=/%$/,a="string"==t.jTypeOf(n)&&r.test(n);return o&&0==typeof n?!1:(n=parseFloat(n),isNaN(n)?!1:(isNaN(s.minimum)&&(s.minimum=Number.NEGATIVE_INFINITY),isNaN(s.maximum)&&(s.maximum=Number.POSITIVE_INFINITY),s.hasOwnProperty("enum")&&!e(s["enum"]).contains(n)?!1:s.minimum>n||n>s.maximum?!1:(i=a?n+"%":n,!0)))},array:function(e,s,n){if("string"===t.jTypeOf(s))try{s=window.JSON.parse(s)}catch(o){return!1}return"array"===t.jTypeOf(s)?(i=s,!0):!1},"function":function(e,s,n){return"function"===t.jTypeOf(s)?(i=s,!0):!1}},o=function(e,i,s){var o;if(o=e.hasOwnProperty("oneOf")?e.oneOf:[e],"array"!=t.jTypeOf(o))return!1;for(var r=0,a=o.length-1;a>=r;r++)if(n[o[r].type](o[r],i,s))return!0;return!1},r=function(t){var e,i,n,o;if(t.hasOwnProperty("oneOf"))for(n=t.oneOf.length,e=0;n>e;e++)for(i=e+1;n>i;i++)s[t.oneOf[e].type]>s[t.oneOf[i].type]&&(o=t.oneOf[e],t.oneOf[e]=t.oneOf[i],t.oneOf[i]=o);return t},a=function(e){var i;if(i=e.hasOwnProperty("oneOf")?e.oneOf:[e],"array"!=t.jTypeOf(i))return!1;for(var r=i.length-1;r>=0;r--){if(!i[r].type||!s.hasOwnProperty(i[r].type))return!1;if(t.defined(i[r]["enum"])){if("array"!==t.jTypeOf(i[r]["enum"]))return!1;for(var a=i[r]["enum"].length-1;a>=0;a--)if(!n[i[r].type]({type:i[r].type},i[r]["enum"][a],!0))return!1}}return e.hasOwnProperty("default")&&!o(e,e["default"],!0)?!1:!0},h=function(t){this.schema={},this.options={},this.parseSchema(t)};t.extend(h.prototype,{parseSchema:function(t){var e,i;for(e in t)if(t.hasOwnProperty(e)&&(i=(e+"").jTrim().jCamelize(),!this.schema.hasOwnProperty(i))){if(this.schema[i]=r(t[e]),!a(this.schema[i]))throw"Incorrect definition of the '"+e+"' parameter in "+t;this.options[i]=void 0}},set:function(e,s){e=(e+"").jTrim().jCamelize(),"string"==t.jTypeOf(s)&&(s=s.jTrim()),this.schema.hasOwnProperty(e)&&(i=s,o(this.schema[e],s)&&(this.options[e]=i),i=null)},get:function(e){return e=(e+"").jTrim().jCamelize(),this.schema.hasOwnProperty(e)?t.defined(this.options[e])?this.options[e]:this.schema[e]["default"]:void 0},fromJSON:function(t){for(var e in t)this.set(e,t[e])},getJSON:function(){var e=t.extend({},this.options);for(var i in e)void 0===e[i]&&void 0!==this.schema[i]["default"]&&(e[i]=this.schema[i]["default"]);return e},fromString:function(t){e(t.split(";")).jEach(e(function(t){t=t.split(":"),this.set(t.shift().jTrim(),t.join(":"))}).jBind(this))},exists:function(t){return t=(t+"").jTrim().jCamelize(),this.schema.hasOwnProperty(t)},isset:function(e){return e=(e+"").jTrim().jCamelize(),this.exists(e)&&t.defined(this.options[e])},jRemove:function(t){t=(t+"").jTrim().jCamelize(),this.exists(t)&&(delete this.options[t],delete this.schema[t])}}),t.Options=h}}(i),function(e){if(!e)throw"MagicJS not found";var i=e.$;e.$AA=function(t){var i,s=[];for(i in t)t.hasOwnProperty(i)&&"$J"!=(i+"").substring(0,2)&&s.push(t[i]);return e.$A(s)},e.nativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,load:1,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1},e.customEventsAllowed={document:!0,element:!0,"class":!0,object:!0},e.customEvents={bindEvent:function(t,s,n){if("array"==e.jTypeOf(t))return i(t).jEach(this.bindEvent.jBindAsEvent(this,s,n)),this;if(!t||!s||"string"!=e.jTypeOf(t)||"function"!=e.jTypeOf(s))return this;if("domready"==t&&e.browser.ready)return s.call(this),this;n=parseInt(n||10),s.$J_EUID||(s.$J_EUID=Math.floor(Math.random()*e.now()));var o=this.jFetch("_events",{});if(o[t]||(o[t]={}),o[t][n]||(o[t][n]={}),o[t].orders||(o[t].orders={}),o[t][n][s.$J_EUID])return this;o[t].orders[s.$J_EUID]&&this.unbindEvent(t,s);var r=this,a=function(t){return s.call(r,i(t))};return e.nativeEvents[t]&&!o[t]["function"]&&(2==e.nativeEvents[t]&&(a=function(t){return t=e.extend(t||window.e,{$J_TYPE:"event"}),s.call(r,i(t))}),o[t]["function"]=function(e){r.jCallEvent(t,e)},this[e._event_add_](e._event_prefix_+t,o[t]["function"],!1)),o[t][n][s.$J_EUID]=a,o[t].orders[s.$J_EUID]=n,this},jCallEvent:function(t,i){try{i=e.extend(i||{},{type:t})}catch(s){}if(!t||"string"!=e.jTypeOf(t))return this;var n=this.jFetch("_events",{});return n[t]||(n[t]={}),n[t].orders||(n[t].orders={}),e.$AA(n[t]).jEach(function(i){i!=n[t].orders&&i!=n[t]["function"]&&e.$AA(i).jEach(function(t){t(this)},this)},i),this},unbindEvent:function(t,i){if(!t||!i||"string"!=e.jTypeOf(t)||"function"!=e.jTypeOf(i))return this;i.$J_EUID||(i.$J_EUID=Math.floor(Math.random()*e.now()));var s=this.jFetch("_events",{});if(s[t]||(s[t]={}),s[t].orders||(s[t].orders={}),order=s[t].orders[i.$J_EUID],s[t][order]||(s[t][order]={}),order>=0&&s[t][order][i.$J_EUID]&&(delete s[t][order][i.$J_EUID],delete s[t].orders[i.$J_EUID],0==e.$AA(s[t][order]).length&&(delete s[t][order],e.nativeEvents[t]&&0==e.$AA(s[t]).length))){this[e._event_del_](e._event_prefix_+t,s[t]["function"],!1)}return this},destroyEvent:function(t){if(!t||"string"!=e.jTypeOf(t))return this;var i=this.jFetch("_events",{});if(e.nativeEvents[t]){this[e._event_del_](e._event_prefix_+t,i[t]["function"],!1)}return i[t]={},this},cloneEvents:function(e,s){var n=this.jFetch("_events",{});for(t in n)if(!s||t==s)for(order in n[t])if("orders"!=order&&"function"!=order)for(f in n[t][order])i(e).bindEvent(t,n[t][order][f],order);return this},jCopyEvents:function(t,e){if(1!==t.nodeType)return this;var s=this.jFetch("events");if(!s)return this;for(var n in s)if(!e||n==e)for(var o in s[n])i(t).bindEvent(n,s[n][o]);return this},jFetch:e.Element.jFetch,jStore:e.Element.jStore}}(i),function(t){if(!t)throw"MagicJS not found";var e=t.$;Math.rand=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},Math.range=function(t,e,i){return Math.min(e,Math.max(t,i))},t.extend=function(e,i){e instanceof window.Array||(e=[e]),i instanceof window.Array||(i=[i]);for(var s=0,n=e.length;n>s;s++)if(t.defined(e[s]))for(var o=0,r=i.length;r>o;o++)if(t.defined(i[o]))for(var a in i[o]||{})try{e[s][a]=i[o][a]}catch(h){}return e[0]},t.inherit=function(t,e){function i(){}i.prototype=e.prototype,t.$parent=e.prototype,t.prototype=new i,t.prototype.constructor=t},t.extend(t.Array,{rand:function(){return this[Math.rand(0,this.length-1)]}}),t.extend(t.Element,{indoc:function(){for(var t=this;t.parentNode;){if("BODY"==t.tagName||"HTML"==t.tagName)return!0;t=t.parentNode}return!1},clone:function(i,s){void 0==i&&(i=!0),void 0==s&&(s=!0);var n=e(this.cloneNode(i));n.$J_UUID==this.$J_UUID&&(n.$J_UUID=!1,t.$uuid(n));var o=t.$A(n.getElementsByTagName("*"));o.push(n);var r=t.$A(this.getElementsByTagName("*"));return r.push(this),o.jEach(function(i,n){if(i.id="",(!t.browser.trident||t.doc.documentMode&&t.doc.documentMode>=9)&&(e(r[n]).cloneEvents&&e(r[n]).cloneEvents(i),e(r[n]).jCopyEvents&&e(r[n]).jCopyEvents(i)),s){e(i).jStore("master",r[n]),e(i).jStore("isclone",!0);var o=e(r[n]).jFetch("clones",[]);o.push(i)}}),n},jSetOpacity_:t.Element.jSetOpacity,jSetOpacity:function(t,i){return this.jFetch("isclone")&&e(this.jFetch("master")).indoc()?this:(this.jSetOpacity_(t,i),e(this.jFetch("clones",[])).jEach(function(e){e.jSetOpacity_(t,i)}),this)},addEvent_:t.Element.jAddEvent,jAddEvent:function(t,i){return this.jFetch("isclone")&&e(this.jFetch("master")).indoc()?this:(this.addEvent_(t,i),e(this.jFetch("clones",[])).jEach(function(e){e.addEvent_(t,i)}),this)}})}(i),s.Modules||(s.Modules={}),s.Modules.ArrowsPair=function(){function t(t){return s.$new("button").jAddClass(this.$o("class")).jAddClass(this.$o("class")+"-arrow").jAddClass(this.$o("class")+"-arrow-"+t).append(s.$new("span")).jAppendTo(this.$o("container"))}function e(t,e){e.stopDistribution(),this.jCallEvent(t)}var i=["next","prev"],n=function(i){s.$uuid(this),this.options=new s.Options({container:null,"class":"","class-hidden":"","class-disabled":"",position:"inside",orientation:"horizontal",form:"button"}),this.options.fromJSON(i),this.$o=this.options.get.jBind(this.options),this.prev=t.call(this,"prev"),this.next=t.call(this,"next"),this.next.jAddEvent("click",function(t){t.stop()}).jAddEvent("btnclick tap",e.jBind(this,"forward")),this.prev.jAddEvent("click",function(t){t.stop()}).jAddEvent("btnclick tap",e.jBind(this,"backward")),s.$uuid(this)};return n.prototype={disable:function(t){a(t&&[t]||i).jEach(function(t){this[t].jAddClass(this.$o("class-disabled"))},this)},enable:function(t){a(t&&[t]||i).jEach(function(t){this[t].jRemoveClass(this.$o("class-disabled"))},this)},hide:function(t){a(t&&[t]||i).jEach(function(t){this[t].jAddClass(this.$o("class-hidden"))},this)},show:function(t){a(t&&[t]||i).jEach(function(t){this[t].jRemoveClass(this.$o("class-hidden"))},this)}},s.extend(n.prototype,s.customEvents),n}(),s.Effects={},s.Effects.Blank=function(){var t=function(t,e){this.els=[a(t[0])?t[0].node:null,a(t[1])?t[1].node:null],this.container=$mjs((this.els[1]||this.els[0]).parentNode),this.options=new s.Options(this.defaults),this.options.fromJSON(e),this.o=this.options.get.jBind(this.options),this.set=this.options.set.jBind(this.options),this.name="blank",this.flag=!1,this.stylesBefore={},this.stylesAfter={},this.stylesReset={}};return t.prototype={defaults:{duration:500,direction:"right","cubic-bezier":"cubic-bezier(0.7, 0, 1, 1)",startPoint:0},something_:function(){a(this.container).offsetHeight,
this.els[0]&&this.els[0].offsetHeight,this.els[1]&&this.els[1].offsetHeight},onBeforeRender_:s.$F,onAfterRender_:s.$F,onComplete_:s.$F,onStart_:s.$F,transition_:s.FX.Transition.linear,prepare_:function(){if("blank"!=this.name)if(s.browser.ieMode&&s.browser.ieMode<10&&"blank"!=this.name){var t=[];this.els[0]&&t.push(this.els[0]),this.els[1]&&t.push(this.els[1]),this.ieEff=new s.PFX(t,{duration:this.o("duration"),onComplete:this.onComplete_.jBind(this),onBeforeRender:this.onBeforeRender_.jBind(this),onStart:this.onStart_.jBind(this),onAfterRender:this.onAfterRender_.jBind(this),transition:this.transition_})}else this.els[0]&&this.els[0].jSetCss(this.stylesBefore.el1).show(),this.els[1]&&this.els[1].jSetCss(this.stylesBefore.el2).show(),this.something_()},jRemoveClasses_:function(t){for(var t=0;2>t;t++)this.els[t]&&this.defTrans_(this.els[t]),0==t&&this.els[t]&&this.els[t].hide(),this.els[t]&&this.els[t].jSetCss(this.stylesReset);this.flag||setTimeout(a(function(){this.ken&&this.ken(),this.inSide&&this.inSide(this)}).jBind(this),1),this.flag=!1},defTrans_:function(t){t.jSetCss({transition:"none"})},stop:function(t){var e;if(this.flag&&(this.ieEff&&this.ieEff.stop(!0),!this.ieEff))for(e=0;2>e;e++)this.els[e]&&this.els[e].jRemoveEvent("transitionend"),this.jRemoveClasses_(e)},start:function(t){var e=0,i={transition:"all "+this.o("duration")+"ms "+this.o("cubic-bezier")},s=function(t,e){this.els[t].jRemoveEvent(e.type),this.flag=!1,this.jRemoveClasses_(t)};if(t.end&&(this.inSide=t.end),this.kenFlag=t.kenburns?!0:!1,t.kenburns&&(this.ken=t.kenburns),this.prepare_(),"blank"!=this.name)for(this.flag=!0,t.start&&t.start.jDelay(1);2>e;e++)this.els[e]?(1===e&&this.els[e].jAddEvent("transitionend",s.jBind(this,e)),this.els[e].jSetCss(i).jSetCss(this.stylesAfter["el"+(e+1)])):1===e&&this.els[0]&&this.els[0].jAddEvent("transitionend",s.jBind(this,0));else this.els[0]&&this.els[0].hide(),this.els[1].show(),this.ken&&this.ken()},pause:function(){}},t}(),s.Effects.Fade=function(){var t=function(t,e){s.Effects.Blank.apply(this,arguments),this.name="fade",(!s.browser.trident||s.browser.trident&&s.browser.ieMode>9)&&(this.stylesBefore={el1:{"z-index":30},el2:{"z-index":50,opacity:0}},this.stylesAfter={el1:{"z-index":35},el2:{"z-index":50,opacity:1}},this.stylesReset={"z-index":"",opacity:1})};return s.inherit(t,s.Effects.Blank),s.browser.trident&&s.browser.ieMode<10&&s.extend(t.prototype,{onComplete_:function(){this.flag=!1,this.els[0]&&this.els[0].hide(),this.ken&&this.ken(),this.inSide&&this.inSide(this),this.outSide&&this.outSide()},onStart_:function(){this.flag=!0,this.els[0]&&this.els[0].jSetCssProp("z-index",30),this.els[1]&&this.els[1].jSetCssProp("z-index",50).jSetOpacity(0).show()},stop:function(){this.flag&&this.ieEff.stop(!0)},start:function(t){var e=[];t.start&&t.start(),t.end&&(this.inSide=t.end),this.kenFlag=t.kenburns?!0:!1,t.kenburns&&(this.ken=t.kenburns),this.prepare_(),this.els[0]&&e.push({opacity:[1,1]}),this.els[1]&&e.push({opacity:[0,1]}),this.ieEff.start(e)}}),t}(),s.Effects.Dissolve=function(){var t=function(t,e){s.Effects.Blank.apply(this,arguments),this.name="dissolve",(!s.browser.trident||s.browser.trident&&s.browser.ieMode>9)&&(this.stylesBefore={el1:{"z-index":30,opacity:1},el2:{"z-index":50,opacity:0}},this.stylesAfter={el1:{opacity:0},el2:{opacity:1}},this.stylesReset={"z-index":"",opacity:1})};return s.inherit(t,s.Effects.Blank),s.browser.trident&&s.browser.ieMode<10&&s.extend(t.prototype,{onComplete_:function(){this.flag=!1,this.els[0]&&this.els[0].hide(),this.ken&&this.ken(),this.inSide&&this.inSide(this),this.outSide&&this.outSide()},onStart_:function(){this.flag=!0,this.els[0]&&this.els[0].jSetCssProp("z-index",30),this.els[1]&&this.els[1].jSetCssProp("z-index",50).jSetOpacity(0).show()},stop:function(){this.flag&&this.ieEff.stop(!0)},start:function(t){var e=[];t.start&&t.start(),t.end&&(this.inSide=t.end),this.kenFlag=t.kenburns?!0:!1,t.kenburns&&(this.ken=t.kenburns),this.prepare_(),this.els[0]&&e.push({opacity:[1,0]}),this.els[1]&&e.push({opacity:[0,1]}),this.ieEff.start(e)}}),t}(),s.Effects.Slide=function(){var t=function(t,e){s.Effects.Blank.apply(this,arguments),this.name="slide";var i=0,n=0,o=0,r=0,h=100,l=100;a(["left","right"]).contains(this.o("direction"))?(l=0,i=this.o("startPoint")||0,"right"==this.o("direction")?(h*=-1,o=100+i):o=-100+i):(h=0,n=this.o("startPoint")||0,"bottom"==this.o("direction")?(l*=-1,r=100+n):r=-100+n),this.stylesBefore={el1:{transform:"translate("+i+"%, "+n+"%)"},el2:{transform:"translate("+o+"%, "+r+"%)"}},this.stylesAfter={el1:{transform:"translate("+h+"%, "+l+"%)"},el2:{transform:"translate(0%, 0%)"}},this.stylesReset={transform:""}};return s.inherit(t,s.Effects.Blank),s.browser.trident&&s.browser.ieMode<10&&s.extend(t.prototype,{calcDirect_:function(){var t,e,i,s=this.o("direction");switch(i="left"==this.o("direction")||"right"==this.o("direction")?"left":"top",s){case"left":case"top":t=["0%","100%"],e=["-100%","0%"];break;case"right":case"bottom":t=["0%","-100%"],e=["100%","0%"]}this.effMove_={el0:t,el1:e,style:i}},onComplete_:function(){var t,e="0%";for(this.els[0].hide(),this.els[1].show(),t=0;2>t;++t)this.els[t].jSetCssProp(this.effMove_.style,e);this.flag=!1,this.ken&&this.ken(),this.inSide&&this.inSide(this),this.outSide&&this.outSide()},onStart_:function(){this.els[0].jSetCssProp("z-index",50).show(),this.els[1].jSetCssProp("z-index",30).jSetCssProp(this.effMove_.style,this.effMove_.el1[0]).show(),this.flag=!0},transition_:s.FX.Transition.expoOut,stop:function(){this.flag&&(this.ieEff.stop(!1),this.onComplete_())},start:function(t){t.start&&t.start(),t.end&&(this.inSide=t.end),this.kenFlag=t.kenburns?!0:!1,t.kenburns&&(this.ken=t.kenburns),this.calcDirect_();var e=this.effMove_.style,i=this.effMove_.el0,s=this.effMove_.el1,n=[{},{}];this.prepare_(),n[0][e]=i,n[1][e]=s,this.ieEff.start(n)}}),t}(),s.Effects.Kenburns=function(){var t=function(t,e,i,n){this.item=t,this.previous=i,this.container=t,this.itemIndex=e,this.options=new s.Options(this._defaults),this.options.fromJSON(n),this.o=this.options.get.jBind(this.options),this.eff=["c","tl","tr","br","bl"][Math.rand(0,4)],this.name="kenburns",this._flag=!1,s.browser.trident&&s.browser.ieMode<10&&(this.effMove=this.calcSizeIe_()),this.prepareItem()};return t.prototype={_defaults:{"cubic-bezier":"cubic-bezier(0.0, 0.0, 1.0, 1.0)",duration:3e3,jDel:50},_render:function(){this.item.offsetHeight},recoverySize:function(t){if(this.previous||t){var e=t?this:this.previous;e._stopTransition(),e.item.jSetCssProp("transform",""),s.browser.ieMode&&s.browser.ieMode<10&&e.iePFX&&(e.item.jSetCss({top:"0%",left:"0%","max-width":"","max-height":""}),9==s.browser.ieMode?e.item.style["-ms-transform"]="":8==s.browser.ieMode?e.item.jSetCss({width:"",height:""}):e.item.jSetCss({width:e.normalSize.width,height:e.normalSize.height}))}},prepareItem:function(){s.browser.ieMode&&s.browser.ieMode<10?(9==s.browser.ieMode?(this.item.style["-ms-transform"]="scale("+this.effMove.before.scale/1e3+")",this.item.jSetCss({top:this.effMove.before.translateY/1e3+"%",left:this.effMove.before.translateX/1e3+"%"})):(this.item.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+this.effMove.before.scale/1e3+",M12=0,M21=0,M22="+this.effMove.before.scale/1e3+",SizingMethod='auto expand')",this.item.jSetCss({top:this.effMove.before.translateY/1e3+"%",left:this.effMove.before.translateX/1e3+"%","max-width":"none","max-height":"none"})),this.iePFX=new s.PFX([this.item],{fps:9==s.browser.ieMode?50:20,duration:this.o("duration")-100,transition_:s.FX.Transition.linear,onComplete:a(function(){this.flag=!1,this.cb&&this.cb(this)}).jBind(this),onBeforeRender:a(function(t,e){9==s.browser.ieMode?(this.item.style["-ms-transform"]="scale("+t.scale/1e3+")",this.item.jSetCss({top:t.translateY/1e3+"%",left:t.translateX/1e3+"%"})):(this.item.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+t.scale/1e3+",M12=0,M21=0,M22="+t.scale/1e3+",SizingMethod='auto expand')",this.item.jSetCss({top:t.translateY/1e3+"%",left:t.translateX/1e3+"%"}))}).jBind(this),onStart:a(function(){this.flag=!0}).jBind(this)})):(this.effMove=this.calcScaleAndPosition(),this.item.jSetCssProp("transition","").jSetCss({transform:"scale("+this.effMove.before.scale+")","transform-origin":this.effMove.before.origin}),this._render())},calcScaleAndPosition:function(){var t="",e=Math.rand(0,1);switch(this.eff){case"c":t="50%";break;case"tl":t="top left";break;case"tr":t="top right";break;case"br":t="bottom right";break;case"bl":t="bottom left"}return{before:{scale:e?1:1.1,origin:t},after:{scale:e?1.1:1,origin:t}}},calcSizeIe_:function(){this.item.parentNode.show(),this.normalSize=this.item.jGetSize();var t,e,i,n,o,r,a,h,l=this.normalSize,c=(this.container.parentNode.jGetSize(),Math.rand(0,1)),d=l.width/100*10,u=l.height/100*10,f=2;switch(9==s.browser.ieMode?(t=e=i=n=1100,o=r=a=h=1):(o=r=a=h=0,t=i=l.width+d,e=n=l.height+u,7==s.browser.ieMode&&(f=1)),this.eff){case"tl":9==s.browser.ieMode?c?(h=4001,a=4001):(r=4001,o=4001):c?(r=-2001,o=-2001):(h=-2001,a=-2001);break;case"tr":9==s.browser.ieMode?c?(h=4001,a=-4001):(r=4001,o=-4001):c?(r=-2001,a=-8001):(h=-2001,o=-8001);break;case"br":9==s.browser.ieMode?c?(h=-4001,a=-4001):(r=-4001,o=-4001):c?(h=-8001,a=-8001):(r=-8001,o=-8001);break;case"bl":9==s.browser.ieMode?c?(h=-4001,a=4001):(r=-4001,o=4001):c?(h=-8001,o=-2001):(r=-8001,a=-2001);break;case"c":9!==s.browser.ieMode&&(c?(h=-4001,a=-4001):(r=-4001,o=-4001))}return{before:{scale:c?1020:1100,scaleX:t,scaleY:e,translateX:o,translateY:r},after:{scale:c?1100:1020,scaleX:i,scaleY:n,translateX:a,translateY:h}}},_stopTransition:function(){var t={transition:"none"};t[s.browser.cssPrefix+"transition"]="none",a(this.item).jSetCss(t)},stop:function(){this._flag&&(this.iePFX&&this.iePFX.stop(),this.item&&this.item.jRemoveEvent("transitionend"),!this.iePFX&&this.cb&&this.cb())},start:function(t){if(!this._start)if(this._start=!0,t.start&&t.start(),t.end&&(this.cb=t.end),this.recoverySize(),this._flag=!0,s.browser.ieMode&&s.browser.ieMode<10)this.timer=setTimeout(a(function(){this.iePFX&&this.iePFX.start([{scale:[this.effMove.before.scale,this.effMove.after.scale],translateX:[this.effMove.before.translateX,this.effMove.after.translateX],translateY:[this.effMove.before.translateY,this.effMove.after.translateY]}])}).jBind(this),this.o("jDel"));else{var e=this.o("jDel"),i=this.o("duration")-e-10;this.item.jSetCssProp("transition","").jSetCss({transform:"translateZ(0) scale("+this.effMove.before.scale+")","transform-origin":this.effMove.before.origin}),this._render(),this.item.jSetCssProp("transition",h+String.fromCharCode(32)+i+"ms"+String.fromCharCode(32)+this.o("cubic-bezier")+String.fromCharCode(32)+e+"ms").jSetCss({transform:"translateZ(0) scale("+this.effMove.after.scale+")","transform-origin":this.effMove.after.origin}),this.callback=a(function(t){this.cb&&this.cb(),this.item.jRemoveEvent(t.type),this._flag=!1}).jBind(this),this.item.jAddEvent("transitionend",this.callback)}}},t}(),i.Options=function(t){if(!t)throw"MagicJS not found";var e=t.$,i={bool:function(t){return"false"==t?!1:!!t},string:function(t){return""+t},"int":function(t,e){return t=parseInt(t),isNaN(t)?e:t},"float":function(t,e){return t=parseFloat(t),isNaN(t)?e:t},size:function(e,i){var s;return"auto"===e?e:"string"==t.jTypeOf(e)&&(s=e.match(/([-+]?[0-9]*\.?[0-9]+)(px|%)?$/))?parseFloat(s[1])+(s[2]?s[2]:"px"):i},"enum":function(e,i,s){return"string"==t.jTypeOf(i)&&(i=i.toLowerCase()),$mjs(e).contains(i===!1?"false":i)?i:s},autoint:function(t,e){return"auto"==t?t:i["int"](t,e)}},s=function(e){this.types={},this.defaults={};var s,n,o;for(s in e)n=e[s],"string"!=t.jTypeOf(n)?this.defaults[s]=n:(n=n.split("("),n[0]=n[0].split(":"),n[0].length>1&&(o=n[0].pop(),2==n.length?(this.types[s]=i[o].jBind(null,n[1].substr(0,n[1].length-1).split(",")),n.pop()):this.types[s]=i[o]),n[0]=n[0].join(":"),this.defaults[s]=this.checkType(s,n.join("(")));this.options={}};return s.prototype.get=function(e){return t.defined(this.options[e])?this.options[e]:this.defaults[e]},s.prototype.set=function(t,e){t=t.jTrim(),t&&(this.options[t]=this.checkType(t,e))},s.prototype.checkType=function(e,i){"string"===t.jTypeOf(i)&&(i=i.jTrim());var s=this.types[e];return t.defined(this.types[e])?s(i,this.defaults[e]):("true"===i&&(i=!0),"false"===i&&(i=!1),parseInt(i)==i&&(i=parseInt(i)),i)},s.prototype.fromRel=function(t){var i=this;e(t.split(";")).jEach(function(t){t=t.split(":"),i.set(t.shift(),t.join(":"))})},s.prototype.fromJSON=function(t){for(var e in t)t.hasOwnProperty(e)&&this.set(e,t[e])},s.prototype.exists=function(e){return t.defined(this.options[e])?!0:!1},s.prototype.getJSON=function(){return t.extend(t.extend({},this.defaults),this.options)},s}(i),function(t){if(!t)throw"MagicJS not found";var e=t.$;i.ImageLoader=new t.Class({img:null,ready:!1,options:{onload:t.$F,onabort:t.$F,onerror:t.$F,oncomplete:t.$F},size:null,_timer:null,_handlers:{onload:function(t){t&&e(t).stop(),this._unbind(),this.ready||(this.ready=!0,this._cleanup(),this.options.onload.jBind(null,this).jDelay(1),this.options.oncomplete.jBind(null,this).jDelay(1))},onabort:function(t){t&&e(t).stop(),this._unbind(),this.ready=!1,this._cleanup(),this.options.onabort.jBind(null,this).jDelay(1),this.options.oncomplete.jBind(null,this).jDelay(1)},onerror:function(t){t&&e(t).stop(),this._unbind(),this.ready=!1,this._cleanup(),this.options.onerror.jBind(null,this).jDelay(1),this.options.oncomplete.jBind(null,this).jDelay(1)}},_bind:function(){e(["load","abort","error"]).jEach(function(t){this.img.jAddEvent(t,this._handlers["on"+t].jBindAsEvent(this).jDefer(1))},this)},_unbind:function(){if(this._timer){try{clearTimeout(this._timer)}catch(t){}this._timer=null}e(["load","abort","error"]).jEach(function(t){this.img.jRemoveEvent(t)},this)},_cleanup:function(){if(this.jGetSize(),this.img.jFetch("new")){var t=this.img.parentNode;this.img.jRemove().jDel("new").jSetCss({position:"static",top:"auto"}),t.kill()}},init:function(i,s){this.options=t.extend(this.options,s),this.img=e(i)||t.$new("img",{},{"max-width":"none","max-height":"none"}).jAppendTo(t.$new("div").jAddClass("magic-temporary-img").jSetCss({position:"absolute",top:-1e4,width:10,height:10,overflow:"hidden"}).jAppendTo(document.body)).jStore("new",!0);var n=function(){this.isReady()?this._handlers.onload.call(this):this._handlers.onerror.call(this),n=null}.jBind(this);this._bind(),i.src?(t.browser.trident900&&t.browser.ieMode<9&&(this.img.onreadystatechange=function(){/loaded|complete/.test(this.img.readyState)&&(this.img.onreadystatechange=null,n&&n())}.jBind(this)),this.img.src=i.src):this.img.src=i,this.img&&this.img.complete&&n&&(this._timer=n.jDelay(100))},destroy:function(){return this._unbind(),this._cleanup(),this.ready=!1,this},isReady:function(){var t=this.img;return t.naturalWidth?t.naturalWidth>0:t.readyState?"complete"==t.readyState:t.width>0},jGetSize:function(){return this.size||(this.size={width:this.img.naturalWidth||this.img.width,height:this.img.naturalHeight||this.img.height})}})}(i),function(t){t.QImageLoader=function(e,i){function s(e){return function(s){h.push(s.destroy()),(i[e]||t.$F).call(l,s,s.origItem),a--,n()}}function n(){e.length?a<(i.queue||3)&&(o=e.shift(),r=new t.ImageLoader(o.img,{onload:s("onload"),onerror:s("onerror"),onabort:s("onabort"),oncomplete:s("oncomplete")}),r.origItem=o,a++):(i.oncomplete||t.$F).call(l,h)}var o,r,a=0,h=[],l=this;this.push=function(s,o){return o||(o=s,s=!1),("string"==t.jTypeOf(o.img)||"img"==o.img.tagName.toLowerCase())&&(e[s?"unshift":"push"](o),i.delay||n()),this},this.abort=function(){r.destroy()},this.load=n,i.delay||e.length&&n()}}(i);var n={width:"auto:size",height:"62.5%:size",orientation:"horizontal:enum(horizontal,vertical)",loop:"true:bool",selectors:"none:enum(left,right,top,bottom,none,false)","selectors-style":"bullets:enum(bullets,thumbnails)","selectors-size":"70:string","selectors-eye":"true:bool",caption:"true:bool","caption-effect":"fade:enum(fade,dissolve,fixed)",arrows:"true:bool",effect:"slide:enum(slide,scroll,fade,dissolve)","effect-speed":"600:int","effect-easing":":string",autoplay:"true:bool","slide-duration":"3000:int",shuffle:"false:bool",kenburns:"false:bool",pause:"click:enum(off,hover,click,selector-click,false)","height-depends":"true:bool",fullscreen:"false:bool",loader:"true:bool",preload:"true:bool",keyboard:"true:bool",links:"_self:enum(false,_self,_blank,_parent,_top)",onready:s.$F,"start-effect":s.$F,"end-effect":s.$F},o=function(t,e,i){s.$uuid(this),this.options=new s.Options({}),this.options.fromJSON(t),this.o=this.options.get.jBind(this.options),this.set=this.options.set.jBind(this.options),this.bullets="bullets"==this.o("selectors-style")?!0:!1,this.thumbnailOpt=i,this.fullscreen=!1,this.items=[],this.selectorsSize=null,this.wrapSelSize=null,this.movePointThumbnails=void 0,this.last=-1,this.id=e,this.selectorsIn=[],this.responsiveImg=null,this.queue=new s.QImageLoader([],{delay:!0,onload:a(function(t,e){var i=("item"==e.type?"item-img-load":"selector-img-load","default"==e.style?"smallImg":"fullScreenImg");"item"==e.type?(this.items[e.index]["default"==e.style?"defSize":"fsSize"]=t.jGetSize(),this.jCallEvent("addImgToCacheBox",{img:this.items[e.index][i]})):this.jCallEvent("addImgToCacheBox",{img:e.img})}).jBind(this),oncomplete:a(function(t,e){e&&this.jCallEvent(e.type+"-img-load",{item:this.items[e.index],itemStyle:e.style})}).jBind(this),onerror:a(function(t,e){"item"==e.type&&(e.img.hide(),e.img.parentNode.appendChild(document.createTextNode("Image cannot be loaded")))}).jBind(this)}),this.fullscreenQueue=new s.QImageLoader([],{onload:a(function(t,e){var i="default"==e.style?"smallImg":"fullScreenImg";this.items[e.index]["default"==e.style?"defSize":"fsSize"]=t.jGetSize(),"string"==s.jTypeOf(this.items[e.index][i])&&(this.items[e.index][i]=s.$new("img",{src:this.items[e.index][i]})),this.items[e.index][i].jAddClass("mss-slide-img").setProps({usemap:this.items[e.index].useMap_}),this.jCallEvent("addImgToCacheBox",{img:this.items[e.index][i]}),this.jCallEvent("item-fullscreen-load",{item:this.items[e.index],itemStyle:e.style,createReplace:e.createReplace})}).jBind(this),onerror:function(t,e){this.items[e.index][e.type]=null}.jBind(this),oncomplete:a(function(t,e){e&&void 0!=e.index&&this.items[e.index].progress&&this.items[e.index].progress.hide()}).jBind(this)})};o.prototype={calcThumbWrapSize:function(t){var e,i,s,n;if("bullets"!=this.o("selectors-style")){for(e=a(["top","bottom"]).contains(t),i=!e,s=0,n=0;n<this.items.length;n++)this.items[n].selector&&(s+=this.items[n].selector.jGetSize()[e?"width":"height"],s+=parseInt(this.items[n].selector.jGetCss("margin-"+(e?"left":"top")))+parseInt(this.items[n].selector.jGetCss("margin-"+(e?"right":"bottom"))));this.getSelectorParent()&&(this.parentThumb.jSetCssProp(e?"width":"height",s),this.wrapSelSize&&(this.wrapSelSize[e?"width":"height"]=s))}},getSelectorParent:function(){var t=0;if(!this.parentThumb)do this.parentThumb=this.items[t].selector&&this.items[t].selector.parentNode,t++;while(!this.parentThumb&&this.items[t]);return this.parentThumb?!0:!1},FSImageLoad:function(t,e){var i=this.items[t||this.last],s=this.fullscreen?i.fullScreenImg:i.smallImg;s&&(!this.fullscreen||i.fullScreenImg&&!i.fsSize&&"fullScreen"!=i.whatImg)&&(this.fullscreen||i.smallImg&&!i.defSize&&"default"!=i.whatImg)&&(i.progress&&i.progress.show(),i.fullScreenImg&&i.smallImg&&(this.fullscreen?i.smallImg.hide():i.smallImg.show()),this.fullscreenQueue.push(!0,{img:s,index:i.index,style:"fullScreen"==i.whatImg?"default":"fullScreen",createReplace:e}),this.fullscreenQueue.load())},mapExpand:function(t){var e,i,n,o,r,a,h=this.items[t||this.last],l=h.defSize,c=h.fsSize;if(h.img&&l&&c&&(i=(h.img.getAttribute("usemap")||"").replace("#",""),e=/-expanded/.test(i),!(this.fullScreen&&e||!this.fullScreen&&!e)))if(this.fullScreen){if(!h.fullScreenImg)return;i&&(n=document.getElementsByName(i))&&n.length&&(o=c.width/l.width,r=c.height/l.height,h.map=$mjs(n[0].cloneNode(!0)),h.map.setAttribute("id",i+"-expanded"),h.map.setAttribute("name",i+"-expanded"),a=s.$A($mjs(n[0]).byTag("area")),s.$A(h.map.byTag("area")).jEach(function(t,e){t.setAttribute("shape",a[e].shape),t.setAttribute("coords",s.$A(a[e].coords.split(",")).map(function(t){return t%2?t*r:t*o}).join(",")),s.browser.ieMode&&s.browser.ieMode<9&&$mjs(t).jAddEvent("mouseup",function(t){t.stop()})}),h.map.jAppendTo(h.node.parentNode),h.img.setAttribute("useMap","#"+i+"-expanded"))}else h.map.jRemove(),h.img.setAttribute("useMap",h.img.getAttribute("usemap").replace("-expanded",""))},push:function(t,e){var i,n,o={ready:!1},r=t.tagName.toUpperCase(),h=!1,l="thumbnail";return"FIGURE"==r?(i=a(t).byTag("FIGCAPTION")[0],i&&(o.text=i.innerHTML,a(i).jRemove()),a(t).byTag("A")[0]?(r="A",n=a(t).byTag("A")[0]):a(t).byTag("IMG")&&(n=a(t).byTag("IMG")[0]),i=null):n=t,"A"==r&&(o.href=n.href,i=n.getAttribute("data-image"),i?o.smallImg=i:h=n.getAttribute("rel"),!o.text&&(o.text=a(n).byTag("SPAN")[0]),o.tag=r.toLowerCase(),n=a(n).byTag("IMG")[0],o.smallImg&&n&&n.src&&!this.bullets&&(o.selector=e?null:s.$new("img",{src:n.src})),i=null),!n&&(n=t),o.useMap_=n.getAttribute("usemap"),o.smallImg||(i=n.getAttribute("data-image"),!i&&(i=n.src),o.smallImg=i,o.img&&(o.smallImg=i),i=null),i=n.getAttribute("data-thumb-image"),!i||this.bullets||o.selector||(o.selector=e?null:s.$new("img",{src:i})),i=null,i=n.getAttribute("data-fullscreen-image"),i&&(o.fullScreenImg=i),!o.title&&(o.title=n.title),!o.text&&(o.text=n.getAttribute("data-caption")),o.tag||(o.smallImg?o.tag="img":(o.tag=r.toLowerCase(),o.noImg=a(t.cloneNode(!0)),"div"==o.tag&&s.$A(o.noImg.childNodes).jEach(a(function(t){"element"==s.jTypeOf(t)&&null!==t.getAttribute("data-mss-caption")&&(!o.text&&(o.text=t.innerHTML),a(t).jRemove())}).jBind(this)))),o.selector||("div"!=a(t).tagName.toLowerCase()||this.bullets||s.$A(t.childNodes).jEach(a(function(t){"element"==s.jTypeOf(t)&&null!==t.getAttribute("data-mss-thumbnail")&&(!o.selector&&(o.selector=e?null:t),a(t).jRemove())}).jBind(this)),o.selector||this.bullets||(o.smallImg?o.selector=e?null:s.$new("img",{src:o.smallImg}):o.noImg&&s.$A(o.noImg.childNodes).jEach(a(function(t){"element"==s.jTypeOf(t)&&(o.selector||"img"!=t.tagName.toLowerCase()||(o.selector=e?null:s.$new("img",{src:t.src})))}).jBind(this))),o.selector||(o.selector=e?null:s.$new("div").jAddClass("mss-selector").jAddClass("mss-selector-empty"))),o.whatImg="default",this.bullets&&(l="bullet"),o.index=this.items.push(o)-1,!e&&o.selector&&(o.selector.jStore("slideshow:item",o).jAddClass("mss-selector").jAddClass("mss-selector-"+l),this.bullets&&o.selector.jAddClass("mss-selector-"+(o.index+1))),!o.noImg&&a(t).hide(),o},addSelectors:function(){if(!this.added&&this.o("selectors")){this.added=!0;for(var t=0;t<this.items.length;t++)this.items[t].selector&&"img"==this.items[t].selector.tagName.toLowerCase()&&(this.queue.push({img:this.items[t].selector,index:this.items[t].index,type:"selector"}),this.queue.load()),this.jCallEvent("add-selector",{item:this.items[t]})}},prepareItem:function(t){var e;this.items[t].ready||(this.items[t].smallImg?(this.o("loader")&&(this.items[t].progress=s.$new("div"),this.items[t].progress.jAddClass("mss-loader").jAppendTo(this.items[t].node).show()),this.fullscreen&&this.items[t].fullScreenImg?(this.items[t].whatImg="fullScreen",e=s.$new("img",{src:this.items[t].fullScreenImg}),this.items[t].fullScreenImg=e):(this.items[t].whatImg="default",e=s.$new("img",{src:this.items[t].smallImg}),this.items[t].smallImg=e),e.jAddClass("mss-slide-img").setProps({usemap:this.items[t].useMap_}),this.queue.push({img:e,index:this.items[t].index,type:"item",style:this.items[t].whatImg}),this.queue.load(),s.browser.ieMode&&s.browser.ieMode<8&&this.items[t].node.appendChild(s.$new("span",null,{display:"inline-block","vertical-align":"middle",width:0,height:"100%"})),this.items[t].node.appendChild(this.items[t]["default"==this.items[t].whatImg?"smallImg":"fullScreenImg"])):(this.items[t].node.jAddClass("mss-content-slide"),this.items[t].node.appendChild(this.items[t].noImg)),this.items[t].ready=!0,this.jCallEvent("add-item",{item:this.items[t]}),this.addSelectors())},activate:function(t){return t%=this.items.length,0>t&&(t+=this.items.length),t!=this.last&&(this.prevItem=this.items[this.last]?this.items[this.last]:null,this.last=t,this.prepareItem(t),this.jCallEvent("activate",{item:this.items[t],prevItem:this.prevItem})),this},preload:function(t,e){s.$A(this.items).jEach(a(function(e){e.node=s.$new("div").hide().jAddClass("mss-slide-"+e.index),this.jCallEvent("create",{item:this.items[e.index]}),t&&this.prepareItem(e.index)}).jBind(this)),this.activate(e)}},s.extend(o.prototype,s.customEvents);var r=function(t){this.options=new s.Options({duration:1e3,direction:"right"}),this.options.fromJSON(t),this.o=this.options.get.jBind(this.options),this.set=this.options.set.jBind(this.options),"vertical"==this.o("orientation")&&this.set("direction","bottom"),this.kenburns=null,this.last=null,this.item=null,s.$uuid(this)};r.prototype={jump:function(t){var e,i;if(this.item&&(!this.item||this.item.node)||t.item&&(!t.item||t.item.node))return this.stop(),"no"==this.o("random")&&(t.effect=!1),"auto"==t.effect&&(t.effect="slide"),this.o("kenburns")&&!this.item&&(t.kenburns=!0),this.prepareKenburns(t),e=s.Effects[("-"+(this.item?t.effect?t.effect:this.o("effect"):"blank")).jCamelize()],i={last:this.item?this.item.index:null,next:t.item.index},this.stopMove=!0,this.last=new e([this.item?this.item:null,t.item],t.options),this.item=t.item,this.last.start({kenburns:this.kenburns?this.kenburns.start.jBind(this.kenburns,{start:this._startEffectKenburns.jBind(this),end:this._endEffectKenburns.jBind(this)}):!1,start:this.o("nokenburns")?null:this._startEffect.jBind(this,i),end:this.o("nokenburns")?null:this._endEffect.jBind(this,i)}),this.activeItem=null,this},prepareKenburns:function(t){if(!(this.o("nokenburns")||this.kenburnsStop||t.item.noImg)){var e;if(this.o("kenburns")&&t.kenburns){if(this.prevKen=this.kenburns,e=parseInt(this.o("slide-duration"))+1e3,e>=1e3)return this.kenburns=new s.Effects.Kenburns(t.item.currentImg||("default"==t.item.type?t.item.smallImg:t.item.fullScreenImg),t.item.index,this.prevKen,s.extend(this.options.getJSON(),{duration:e})),this.kenburns;this.prevKen&&this.prevKen.recoverySize()}else this.kenburns&&this.kenburns.recoverySize(!0);return!1}},_startDrag:function(){this.stopMove=!1},_startEffectKenburns:function(){this.jCallEvent("StartEffectKenburns")},_endEffectKenburns:function(t){this.jCallEvent("EndEffectKenburns",{kenburns:t})},_startEffect:function(t){this.jCallEvent("StartEffect",{lastIndex:t.last,nextIndex:t.next})},_endEffect:function(t){this.jCallEvent("EndEffect",{lastIndex:t.last,nextIndex:t.next})},setOptions:function(t){for(var e in t)this.set(e,t[e])},stop:function(){return this.last&&this.last.stop(),this.kenburns&&this.kenburns.stop(),this},dispose:function(){return this.stop(),null}},s.extend(r.prototype,s.customEvents);var a=s.$;document.createElement("figure"),document.createElement("figcaption");var h=s.normalizeCSS("transform").dashize(),l=function(t,e){var i=-1,r=[];s.$uuid(this),this.options=new s.Options(n),this.originalNode=a(t).jStore("slideshow",this),this.originalClasses=a(t).getAttribute("class")||a(t).getAttribute("className"),this.originalNodes=[],this.id=t.getAttribute("id")||"mss-"+Math.floor(Math.random()*s.now()),this.isFullScreen=!1,this.pause_=!1,this.readyCalc_=!1,this.items=null,this.itemsCount=0,this.enteringFullScreen=!1,this.wrapSize=null,this.movementKenbburns=!1,this.movement=!1,this.progressTimer=null,this.container=null,this.slidesNode=null,this.slidesWrapperNode=null,this.captionWrapperNode=null,this.selectors=null,this.selectorsContainer=null,this.selectorsSettings={orientation:"horizontal",position:"bottom",size:{units:"px",width:"auto",height:"auto"},sides:["height","width"]},this.resizeCallback=this.onResize.jBind(this),this.keyboardCallback=a(function(t){(this.isFullScreen||this.o("keyboard"))&&(37===t.keyCode||39===t.keyCode)&&(this.autoScroll(!0),this.jump({target:37===t.keyCode?"backward":"forward"}))}).jBind(this),this.lastMove=null,this.countThumb=0,this.imgCacheBox=s.$new("div").jAddClass("magic-temporary-img").jSetCss({position:"absolute",top:-1e3,width:10,height:10,overflow:"hidden"}).jAppendTo(document.body),this.cachedCSS=[],this.o=this.options.get.jBind(this.options),this.set=this.options.set.jBind(this.options),this.loadOptions(e),this.container=this.originalNode,s.$A(this.container.childNodes).jEach(a(function(t){3!==t.nodeType&&8!==t.nodeType&&"br"!==t.tagName.toLowerCase()&&"hr"!==t.tagName.toLowerCase()&&r.push(t),this.container.removeChild(t)}).jBind(this)),this.container.jStore("slideshow",this).jSetCss({position:"relative"}).jAddClass("mss-"+this.o("orientation")).setAttribute("id",this.id),s.browser.mobile||this.container.jAddClass("mss-desktop"),"auto"!=this.o("width")&&this.container.jSetCssProp("width",this.o("width")),this.o("height-depends")?(s.browser.ieMode&&s.browser.ieMode<8?(s.$new("div",null,{display:"inline-block","vertical-align":"top","padding-top":this.o("height")}).jAppendTo(this.container),isFinite(this.o("height"))&&/%$/.test(this.o("height"))&&parseFloat(this.o("height"))>100&&(i=s.addCSS(".lt-ie8-magic #"+this.id+String.fromCharCode(32)+"img.mss-slide-img",{"with":"100%",height:"auto"},"magicslideshow-css-reset"))):i=s.addCSS("#"+this.id+":before",{"padding-top":this.o("height"),content:'""'},"magicslideshow-css-reset"),i>-1&&this.cachedCSS.push(i)):this.container.jSetCssProp("height",this.o("height")),this.slidesNode=s.$new("div",{"class":"mss-slider"}),this.slidesWrapperNode=s.$new("div",{"class":"mss-slide-wrapper"}),this.items=new o(this.options.getJSON(),this.id,this.optSizeSel),this.o("fullscreen")&&this.setupFullScreen(),this.o("selectors")?this.setupSelectors():s.browser.ieMode&&s.browser.ieMode<8&&this.slidesNode.jSetCssProp("height","100%"),a(r).jEach(a(function(t){var e=this.items.push(t,this.o("selectors")?!1:!0);e.selector&&this.countThumb++}).jBind(this)),this.originalNodes=r,this.slidesNode.jAppendTo(this.container),this.slidesWrapperNode.jAppendTo(this.slidesNode),"fixed"!=this.o("caption-effect")&&(this.captionWrapperNode=s.$new("div",{"class":"mss-caption"}).jAppendTo(this.slidesNode)),"auto"==this.o("selectors-size")&&this.selectors.childNodes[0].append(this.items.items[0].selector),this.show()};l.prototype={loadOptions:function(t){this.options.fromJSON(t||{}),this.options.fromRel(this.originalNode.getAttribute("data-options")||""),s.browser.touchScreen&&s.browser.mobile&&this.options.fromRel(this.originalNode.getAttribute("data-options-mobile")||""),"auto"==this.o("width")&&this.set("width","100%"),"auto"==this.o("height")&&this.set("height",this.options.defaults.height),"none"==this.o("selectors")&&this.set("selectors",!1),"bullets"==this.o("selectors-style")&&this.set("selectors-eye",!1),!1===this.o("autoplay")&&(this.set("kenburns",!1),this.set("pause",!1)),"off"==this.o("pause")&&this.set("pause",!1),s.browser.ieMode&&s.browser.ieMode<=9&&a(["flip","swipe","blinds3d","cube","bars3d"]).contains(this.o("effect"))&&this.set("effect","slide"),"false"===this.o("links")&&this.set("links",!1)},setupSelectors:function(){var t;this.selectorsSettings.position=this.o("selectors"),("left"==this.selectorsSettings.position||"right"==this.selectorsSettings.position)&&(this.selectorsSettings.orientation="vertical",this.selectorsSettings.sides.reverse()),(t=this.o("selectors-size").match(/^([0-9]+)?\x?([0-9]+)?(px|%)?$/)||this.options.defaults["selectors-size"].match(/^([0-9]+)?\x?([0-9]+)?(px|%)?$/))&&(this.selectorsSettings.size.height="bullets"==this.o("selectors-style")?"auto":parseFloat(t[2])||"auto",this.selectorsSettings.size.width="bullets"==this.o("selectors-style")?"auto":parseFloat(t[1])||"auto"),"auto"===this.selectorsSettings.size[this.selectorsSettings.sides[0]]&&(this.selectorsSettings.size[this.selectorsSettings.sides[0]]=this.selectorsSettings.size[this.selectorsSettings.sides[1]],
this.selectorsSettings.size[this.selectorsSettings.sides[1]]="auto"),isFinite(this.selectorsSettings.size.width)&&isFinite(this.selectorsSettings.size.height)&&(this.selectorsSettings.size.units="px"),this.selectors=s.$new("div").jAddClass("mss-selectors mss-"+this.o("selectors-style")).jStore("settings",this.selectorsSettings).jAppendTo(this.container,"left"==this.selectorsSettings.position?"top":this.selectorsSettings.position),s.browser.ieMode&&7===s.browser.ieMode&&"right"==this.selectorsSettings.position&&this.selectors.jSetCssProp("right","0px"),"thumbnails"==this.o("selectors-style")&&(this.selectors.jSetCssProp(this.selectorsSettings.sides[0],this.selectorsSettings.size[this.selectorsSettings.sides[0]]+this.selectorsSettings.size.units),this.selectors.jSetCss({visibility:"hidden"}),this.selectorsArrows=new s.Modules.ArrowsPair({container:this.selectors,orientation:"mss-"+this.selectorsSettings.orientation,"class":"mss","class-hidden":"mss-hidden","class-disabled":"mss-disabled"}),this.selectorsArrows.hide(),this.selectorsArrows.bindEvent("forward",function(t){this.scrollSelectors("forward")}.jBind(this)),this.selectorsArrows.bindEvent("backward",function(t){this.scrollSelectors("backward")}.jBind(this))),this.selectorsContainer=s.$new("div",{"class":"mss-selectors-container"}).jAppendTo(s.$new("div").jAddClass("mss-selectors-wrapper").jAppendTo(this.selectors)),s.browser.ieMode&&s.browser.ieMode<7&&"width"==this.selectorsSettings.sides[1]&&this.selectorsContainer.parentNode.jSetCss({"float":"left"}),this.o("selectors-eye")&&(this.eyeTracker=s.$new("div",{"class":"mss-selectors-eye"},{position:"absolute"}).jAppendTo(this.selectorsContainer).hide()),a(this.selectorsContainer).jAddEvent("tap btnclick",a(function(t){for(var e,i=t.getOriginalTarget();i&&i!==this.selectorsContainer&&!(e=a(i).jFetch("slideshow:item"));)i=i.parentNode;e&&(t.stop(),"selector-click"==this.o("pause")&&(this.stopAutoScroll=!0),this.autoScroll(!0),this.items.last!=e.index&&(this.recoveryPositionAfterDrag&&this.recoveryPositionAfterDrag(),this.jump({target:e.index,options:{direction:e.index>this.items.last?"forward":"backward"}})))}).jBind(this)),this.container.jAddClass("mss-selectors-"+this.selectorsSettings.orientation+" mss-selectors-"+this.o("selectors"))},setupFullScreen:function(){this.btnFullscreen=s.$new("button").jAddClass("mss-button mss-button-fullscreen mss-button-fullscreen-enter").append(s.$new("span")).jAppendTo(this.slidesNode).jAddEvent("click",function(t){t.stopDistribution()}).jAddEvent("tap btnclick",a(function(t){var e;return 3==t.getButton()?!0:(t.stop(),this.isFullScreen?((e=this.fullScreenBox.jFetch("fullscreen:pseudo:event:keydown"))&&(s.doc.jRemoveEvent("keydown",e),this.fullScreenBox.jDel("fullscreen:pseudo:event:keydown")),this.exitFullScreen()):this.enterFullScreen(),!1)}).jBind(this))},jump:function(t){if("object"!=s.jTypeOf(t)){var e=t;t={target:e}}if(!this.o("loop")){if(!this.itemsCount&&(this.itemsCount=this.items.items.length),"forward"==t.target&&this.itemsCount-1==this.items.last)return;if("backward"==t.target&&0===this.items.last)return}!t.options&&(t.options={}),!t.options.duration&&(t.options.duration=this.o("effect-speed")),!t.options.items&&(t.options.items=this.items.items),!t.options.loop&&(t.options.loop=this.o("loop")),"number"==s.jTypeOf(t.target)&&t.target>=0?t.options.direction=this.direction(t.options.direction||(t.target%this.itemsCount>=this.items.last?"forward":"backward")):("forward"==t.target?t.target="+1":t.target="-1",t.options.direction=this.direction(/^\-/.test(t.target)?"backward":"forward"),t.target=this.items.last+parseInt(t.target)),this.o("effect-easing")&&(t.options["cubic-bezier"]=this.o("effect-easing")),"number"==s.jTypeOf(t.target)&&(this.o("kenburns")&&(t.kenburns=!0),this.lastMove=t,this.items.activate(t.target))},scrollSelectors:function(t){if(this.selectors&&"thumbnails"==this.o("selectors-style")&&t){var e,i,n,o,r,a,l,c={x:0,y:0},d=(this.selectors.jFetch("settings"),"width"==this.selectorsSettings.sides[1]?"left":"top"),u="width"==this.selectorsSettings.sides[1]?"x":"y",f=this.selectorsContainer.parentNode.jGetSize()[this.selectorsSettings.sides[1]],m=this.selectorsContainer.parentNode.jGetPosition(),p=this.selectorsContainer.jGetSize()[this.selectorsSettings.sides[1]],g=[];if(this.selectorsMoveFX?this.selectorsMoveFX.stop():(this.selectorsContainer.jSetCss("transition",h+String.fromCharCode(32)+"0s"),this.eyeTracker&&this.eyeTracker.jSetCssProp("transition","all 0s")),e=this.selectorsContainer.jGetPosition(),"string"==s.jTypeOf(t))c[u]="forward"==t?Math.max(e[d]-m[d]-f,f-p):Math.min(e[d]-m[d]+f,0);else{if("element"!=s.jTypeOf(t))return;i=t.jGetSize(),n=t.jGetPosition(),c[u]=Math.min(0,Math.max(f-p,e[d]+f/2-n[d]-i[this.selectorsSettings.sides[1]]/2))}this.eyeTracker&&n&&n[d]&&(o=this.eyeTracker.jGetPosition(),r=this.eyeTracker.jGetSize(),a={width:[r.width,i.width],height:[r.height,i.height],left:[o.left-m.left,n.left-e.left],top:[o.top-m.top,n.top-e.top]}),s.browser.gecko&&"android"==s.browser.platform||s.browser.ieMode&&s.browser.ieMode<10?("string"==s.jTypeOf(t)&&c[u]==e[d]-m[d]&&(e[d]+=0===e[d]-m[d]?30:-30),c[d]=[f>=p?0:e[d]-m[d],c[u]],delete c.x,delete c.y,this.selectorsMoveFX||(this.selectorsMoveFX=new s.PFX([this.selectorsContainer].concat(this.eyeTracker?[this.eyeTracker]:[]),{duration:500})),g.push(c),a&&(a[d]=[o[d]-e[d],n[d]-e[d]],g.push(a)),this.selectorsMoveFX.start(g),l=c[d][1]):(a&&this.eyeTracker.jSetCss({width:i.width,height:i.height,top:n.top-e.top,left:n.left-e.left,transition:"all 500ms ease"}),"string"==s.jTypeOf(t)&&c[u]==e[d]-m[d]&&(c[u]+=0===e[d]-m[d]?30:-30,this.selectorsContainer.jSetCssProp("transition",""),this.selectorsContainer.jSetCssProp("transform","translate3d("+c.x+"px, "+c.y+"px, 0)"),this.selectorsContainer.jGetSize(),c[u]-=0===e[d]-m[d]?30:-30),this.selectorsContainer.jSetCss({transition:h+String.fromCharCode(32)+"500ms ease",transform:"translate3d("+c.x+"px, "+c.y+"px, 0)"}),l=c[u]),l>=0?this.selectorsArrows.disable("prev"):this.selectorsArrows.enable("prev"),f-p>=l?this.selectorsArrows.disable("next"):this.selectorsArrows.enable("next"),l=null}},direction:function(t){if(t){var e="horizontal"==this.o("orientation")?"right":"bottom";return"forward"==t?e:"backward"==t?{left:"right",right:"left",top:"bottom",bottom:"top"}[e]:t}},show:function(t){if(!this.indoc){this.indoc=!0;return this.container.show().jSetCssProp("display","inline-block"),this.reflowSlider(),this.o("arrows")&&(this.arrows=new s.Modules.ArrowsPair({container:this.slidesNode,"class":"mss","class-hidden":"mss-button-hidden","class-disabled":"mss-disabled",orientation:"mss-"+this.o("orientation")}),this.arrows.bindEvent("forward",function(t){this.stopAutoScroll=!1,this.recoveryPositionAfterDrag&&this.recoveryPositionAfterDrag(),this.autoScroll(!0),this.jump({target:"forward"})}.jBind(this)),this.arrows.bindEvent("backward",function(t){this.stopAutoScroll=!1,this.recoveryPositionAfterDrag&&this.recoveryPositionAfterDrag(),this.autoScroll(!0),this.jump({target:"backward"})}.jBind(this))),this.effect=new r(s.extend(this.options.getJSON(),{duration:this.o("effect-speed"),speed:this.o("slide-duration")})),this.o("caption")&&"fixed"!=this.o("caption-effect")&&(this.textEffect=new r({duration:this.o("effect-speed"),effect:this.o("caption-effect"),direction:this.o("caption-position"),transition:"linear",random:"no",nokenburns:!0})),this.items.bindEvent("item-img-load",a(function(t){t.item.progress&&t.item.progress.hide()}).jBind(this)),this.items.bindEvent("selector-img-load",a(function(t){this.items.selectorsSize=null,this.items.calcThumbWrapSize(this.o("selectors")),this.countThumb--,this.readyCalc()}).jBind(this)),this.items.bindEvent("add-item",a(function(t){t.item.img&&!t.item.imgSize&&(t.item.imgSize=t.item.node.childNodes[0].jGetSize()),this.readyCalc()}).jBind(this)),this.items.bindEvent("add-selector",a(function(t){var e,i,n;isFinite(this.selectorsSettings.size.width)&&isFinite(this.selectorsSettings.size.height)?t.item.selector.jSetCss({width:this.selectorsSettings.size.width,height:this.selectorsSettings.size.height}):s.browser.ieMode&&s.browser.ieMode<8&&t.item.selector.jSetCssProp(this.selectorsSettings.sides[0],this.selectorsSettings.size[this.selectorsSettings.sides[0]]),this.selectorsContainer.appendChild(t.item.selector),n=a(["top","bottom"]).contains(this.o("selectors"))?"width":"height",e=a(this.selectorsContainer.parentNode).jGetSize(),i="height"==n?"width":"height",s.browser.ieMode&&s.browser.ieMode<8&&"thumbnails"==this.o("selectors-style")&&"div"==t.item.selector.tagName.toLowerCase()&&t.item.selector.jSetCss({display:"inline",zoom:1}),t.item.selector.childNodes[0]||"thumbnails"!=this.o("selectors-style")||"div"!=t.item.selector.tagName.toLowerCase()||s.browser.ieMode&&s.browser.ieMode<8,"img"!=t.item.selector.tagName.toLowerCase()&&(this.countThumb--,this.readyCalc())}).jBind(this)),this.items.bindEvent("activate",a(function(t){var e,i;for(this.selectors&&(t.prevItem&&t.prevItem.selector&&t.prevItem.selector.jRemoveClass("mss-selector-active"),t.item.node.jAddClass("mss-slide-active"),t.item.selector?(t.item.selector.jAddClass("mss-selector-active"),0===this.countThumb&&this.scrollSelectors(t.item.selector)):this.eyeTracker&&this.eyeTracker.hide()),i=!1,e=0;e<this.items.items.length;e++)("img"==this.items.items[e].tag||"a:img"==this.items.items[e].tag)&&(i=!0);this.items.FSImageLoad(t.item.index),this.effect.kenburnsStop=!1,this.replaceEffect&&this.replaceEffect.stop(),this.replaceEffect=new this.replaceImg(this.items.items[t.item.index],{fullscreen:this.items.fullscreen,prepareKenburn:this.o("kenburns")?this.prepareKenburn.jBind(this):!1}),this.enteringFullScreen&&t.item.fsSize||!this.enteringFullScreen&&t.item.defSize?this.replaceEffect.start(this.items.fullscreen,!1,{start:this.o("kenburns")?this.startKenburn.jBind(this):!1}):this.replaceEffect.prepareKenburn&&(this.effect.kenburnsStop=!0),this.pause_=!1,this.o("kenburns")&&t.item.node.jAddClass("mss-kenburns-effect"),this.stopEffect?setTimeout(a(function(){this.o("end-effect")({id:this.id,prev:t.prevItem.index,next:t.item.index})}).jBind(this),1):this.effect.jump(s.extend({item:{node:t.item.node,index:t.item.index,type:t.item.whatImg,smallImg:t.item.smallImg,fullScreenImg:t.item.fullScreenImg,noImg:t.item.noImg}},this.lastMove)),this.textEffect&&this.textEffect.jump(s.extend({item:{node:t.item.text,index:t.item.index}},{direction:"forward"}))}).jBind(this)),this.items.bindEvent("item-fullscreen-load",a(function(t){(t.createReplace||this.replaceEffect.noEffect)&&(this.effect.kenburnsStop=!1,this.replaceEffect&&this.replaceEffect.stop(),this.replaceEffect=new this.replaceImg(this.items.items[t.item.index],{fullscreen:this.items.fullscreen,prepareKenburn:this.o("kenburns")?this.prepareKenburn.jBind(this):!1})),this.movement||t.item.index!=this.items.last||(this.o("autoplay")&&this.autoScroll(),this.replaceEffect.start(this.items.fullscreen,!0,{start:this.o("kenburns")?this.startKenburn.jBind(this):!1}))}).jBind(this)),this.effect.bindEvent("StartEffectKenburns",a(function(t){this.movementKenbburns=!0}).jBind(this)),this.effect.bindEvent("EndEffectKenburns",a(function(t){this.movementKenbburns=!1}).jBind(this)),this.effect.bindEvent("StartEffect",a(function(t){this.movement=!0,this.o("loop")||!this.arrows||s.browser.touchScreen||(!this.itemsCount&&(this.itemsCount=this.items.items.length),this.itemsCount-1==this.items.last?this.arrows.disable("next"):this.arrows.enable("next"),0==this.items.last?this.arrows.disable("prev"):this.arrows.enable("prev")),setTimeout(a(function(){this.o("start-effect")({id:this.id,prev:t.lastIndex,next:t.nextIndex})}).jBind(this),1)}).jBind(this)),this.effect.bindEvent("EndEffect",a(function(t){this.autoScroll();var e=!1;this.movement=!1,isFinite(""+t.lastIndex)&&this.items.items[t.lastIndex].node.jRemoveClass("mss-slide-active mss-kenburns-effect"),this.o("kenburns")&&(e={start:this.startKenburn.jBind(this)}),this.replaceEffect&&this.replaceEffect.one?this.o("kenburns")&&this.replaceEffect.startKenburn():this.replaceEffect&&this.replaceEffect.start(this.items.fullscreen,!0,e),setTimeout(a(function(){this.o("end-effect")({id:this.id,prev:t.lastIndex,next:t.nextIndex})}).jBind(this),1)}).jBind(this)),this.items.bindEvent("create",function(t){function e(t){var e=/\[a([^\]]+)\](.*?)\[\/a\]/gi;return t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(e,"<a $1>$2</a>")}var i;this.slidesWrapperNode.appendChild(t.item.node.jAddClass("mss-slide")),this.o("links")&&t.item.href&&t.item.node.jSetCss({cursor:"pointer"}),this.o("caption")&&(t.item.text||t.item.title)&&(i=s.$new("span"),t.item.text&&("element"==s.jTypeOf(t.item.text)?"span"==t.item.text.tagName.toLowerCase()&&(i.changeContent(e(t.item.text.innerHTML)),t.item.text.parentNode&&a(t.item.text.parentNode).replaceChild(i,t.item.text)):i.changeContent(e(t.item.text))),t.item.text=a(i),t.item.title&&a(t.item.text).append(s.$new("b").jAddClass("mss-caption-title").changeContent(t.item.title),"top"),"fixed"==this.o("caption-effect")?s.$new("div",{"class":"mss-caption"}).append(a(t.item.text)).jAppendTo(t.item.node):a(t.item.text).jAppendTo(this.captionWrapperNode).hide())}.jBind(this)),this.items.bindEvent("addImgToCacheBox",a(function(t){this.imgCacheBox&&this.imgCacheBox.append(s.$new("img",{src:t.img.src||t.img}))}).jBind(this)),this.items.preload(this.o("preload"),0),this.slidesNode.jAddEvent("click",a(function(t){var e;t.getTarget();t.stopDistribution(),"click"==this.o("pause")&&(this.pause_?(this.pause_=!1,this.autoScroll()):(this.pause_=!0,this.autoScroll(!0))),this.o("links")&&(e=this.items.items[this.items.last].href,e&&window.open(e,this.o("links")))}).jBind(this)),this.slidesNode.jAddEvent("mouseover mouseout",a(function(t){t.stop();for(var e=t.getRelated();e&&e!==this.slidesNode;)e=e.parentNode;e!=this.slidesNode&&"hover"==this.o("pause")&&(this.pause_="mouseover"==t.type,this.autoScroll(this.pause_))}).jBind(this)),a(window).jAddEvent("resize",this.resizeCallback),this.jump(0),this.initDragOnSlider(),a(document).jAddEvent("keydown",this.keyboardCallback),this}},reflowSlider:function(){if(this.selectors){var t=this.isFullScreen?this.fullScreenBox:this.container;this.isFullScreen||this.container.jSetCssProp("padding-"+this.o("selectors"),this.selectors.jGetSize()[this.selectorsSettings.sides[0]]),s.browser.ieMode&&s.browser.ieMode<8&&(this.slidesNode.jSetCssProp(this.selectorsSettings.sides[0],t.jGetSize()[this.selectorsSettings.sides[0]]-this.selectors.jGetSize()[this.selectorsSettings.sides[0]]),"width"==this.selectorsSettings.sides[0]&&this.slidesNode.jSetCssProp("height",t.jGetSize().height)),this.slidesNode.jSetCssProp(this.o("selectors"),this.selectors.jGetSize()[this.selectorsSettings.sides[0]])}},reflowSelectors:function(){var t;this.isFullScreen?this.fullScreenBox:this.container;this.readyCalc_&&this.selectors&&"thumbnails"==this.o("selectors-style")&&("%"==this.selectorsSettings.size.units&&"height"==this.selectorsSettings.sides[0]&&this.selectors.jSetCssProp(this.selectorsSettings.sides[0],this.container.jGetSize().width*(this.selectorsSettings.size[this.selectorsSettings.sides[0]]/100)),t=this.selectors.jGetSize(),this.selectorsContainer.jGetSize()[this.selectorsSettings.sides[1]]<=t[this.selectorsSettings.sides[1]]&&this.items.calcThumbWrapSize(this.o("selectors")),this.selectorsArrows&&(this.selectorsContainer.jGetSize()[this.selectorsSettings.sides[1]]<=t[this.selectorsSettings.sides[1]]?this.selectorsArrows.hide():this.selectorsArrows.show(),s.browser.ieMode&&s.browser.ieMode<7&&"width"==this.selectorsSettings.sides[1]&&this.selectorsContainer.parentNode.jSetCss({width:t.width-this.selectorsArrows.prev.jGetSize().width-this.selectorsArrows.next.jGetSize().width}),"height"==this.selectorsSettings.sides[1]&&this.selectorsContainer.parentNode.jSetCss({height:t.height-this.selectorsArrows.prev.jGetSize().height-this.selectorsArrows.next.jGetSize().height})),!this.items.selectorsSize&&(this.items.selectorsSize=this.selectors.jGetSize()),!this.items.wrapSelSize&&(this.items.wrapSelSize=this.selectorsContainer.jGetSize()))},readyCalc:function(){var t;this.readyCalc_||0==this.countThumb&&this.items.items[0]&&this.items.items[0].ready&&(this.readyCalc_=!0,a(this.container).jAddEvent("dragstart selectstart",function(t){t.stop()}),this.items.calcThumbWrapSize(this.o("selectors")),this.selectors&&"thumbnails"==this.o("selectors-style")&&(t=this.selectorsContainer.jGetSize()[this.selectorsSettings.sides[0]],t||(t="width"===this.selectorsSettings.sides[0]?parseInt(this.selectorsContainer.jGetCss("padding-right"))+parseInt(this.selectorsContainer.jGetCss("padding-left")):parseInt(this.selectorsContainer.jGetCss("padding-top"))+parseInt(this.selectorsContainer.jGetCss("padding-bottom")),t+=this.selectorsSettings.size[this.selectorsSettings.sides[0]]),this.selectors.jSetCssProp(this.selectorsSettings.sides[0],t),this.selectorsContainer.jSetCss({"box-sizing":"border-box"}),this.reflowSelectors(),s.browser.ieMode&&s.browser.ieMode<7&&"width"==this.selectorsSettings.sides[1]&&(this.selectorsContainer.parentNode.jSetCss({height:"99.99%"}),setTimeout(function(){this.selectorsContainer.parentNode.jSetCss({height:"100%"})}.jBind(this),150)),this.initDragOnSelectors(),this.eyeTracker&&this.eyeTracker.show(),this.scrollSelectors(this.items.items[0].selector),this.onResize(),this.selectors.jSetCss({visibility:"visible"})),setTimeout(a(function(){this.o("onready").call(this,this.id)}).jBind(this),1),this.autoScroll())},onResize:function(){this.container.jGetSize();this.items&&(this.items.selectorsSize=null,this.items.wrapSelSize=null),this.autoScroll(!0),this.readyCalc_&&this.items.calcThumbWrapSize(this.o("selectors")),this.reflowSelectors(),this.reflowSlider(),this.selectors&&"none"!=this.selectors.jGetCss("display")&&this.items.last>-1&&this.items.items[this.items.last].selector&&this.scrollSelectors(this.items.items[this.items.last].selector),this.autoScroll()},prepareToFullScreen:function(){this.replaceEffect&&this.replaceEffect.stop(),this.o("kenburns")&&this.effect.kenburns&&this.effect.kenburns.recoverySize(!0),this.recoveryPositionAfterDrag&&this.recoveryPositionAfterDrag(),this.effect.stop(),this.textEffect&&this.textEffect.stop(),this.autoScroll(!0)},enterFullScreen:function(){this.prepareToFullScreen(),this.enteringFullScreen=!0,this.items.fullscreen=!0;var t=a(document).jGetSize(),e=a(window).jGetScroll();a(document).jGetFullSize(),window.parent!==window.window;this.boxSize=this.container.jGetSize(),this.boxBoundaries=this.container.jGetRect(),this.fullScreenBox||(this.fullScreenBox=s.$new("div",{},{display:"block",overflow:"hidden",position:"absolute",zIndex:2e5,"vertical-align":"middle",opacity:.3}).jAddClass("mss-fullscreen mss-"+this.o("orientation")),this.selectors&&this.fullScreenBox.jAddClass("mss-selectors-"+this.selectorsSettings.orientation).jAddClass("mss-selectors-"+this.o("selectors")),s.browser.mobile||this.fullScreenBox.jAddClass("mss-desktop")),this.fullScreenBox.append(this.slidesNode),this.selectors&&this.fullScreenBox.append(this.selectors),this.fullScreenBox.jAppendTo(document.body),this.fullScreenBox.show(),i.browser.features.fullScreen&&(this.fullScreenBox.jSetOpacity(1),this.autoScroll()),i.browser.fullScreen.request(this.fullScreenBox,{onEnter:this.onEnteredFullScreen.jBind(this),onExit:this.onExitFullScreen.jBind(this),fallback:function(){this.fullScreenFX||(this.fullScreenFX=new s.FX(this.fullScreenBox,{duration:400,transition:s.FX.Transition.cubicOut,onStart:function(){this.fullScreenBox.jSetCss({width:this.boxSize.width,height:this.boxSize.height,top:this.boxBoundaries.top,left:this.boxBoundaries.left})}.jBind(this),onComplete:function(){this.onEnteredFullScreen(!0)}.jBind(this)})),this.fullScreenFX.start({width:[this.boxSize.width,t.width],height:[this.boxSize.height,t.height],top:[this.boxBoundaries.top,0+e.y],left:[this.boxBoundaries.left,0+e.x],opacity:[.3,1]})}.jBind(this)})},onEnteredFullScreen:function(t){var e,i=window.parent!==window.window;!t||this.isFullScreen||i||s.browser.ieMode&&s.browser.ieMode<7||this.fullScreenBox.jSetCss({position:"fixed",top:0,bottom:0,left:0,right:0,width:"auto",height:"auto"}),this.isFullScreen=!0,this.btnFullscreen.jRemoveClass("mss-button-fullscreen-enter").jAddClass("mss-button-fullscreen-exit"),t&&!s.browser.mobile&&(e=function(t){27==t.keyCode&&(s.doc.jRemoveEvent("keydown",e),this.exitFullScreen())}.jBindAsEvent(this),this.fullScreenBox.jStore("fullscreen:pseudo:event:keydown",e),s.doc.jAddEvent("keydown",e),this.leaveFSMessage=new s.Message("Press ESC key to leave full-screen",4e3,this.slidesNode,"mss-message")),this.onResize(),this.items.FSImageLoad(null,!0),"default"==this.items.items[this.items.last].whatImg&&this.items.items[this.items.last].fsSize&&(this.effect.kenburnsStop=!1,this.replaceEffect&&this.replaceEffect.stop(),this.replaceEffect=new this.replaceImg(this.items.items[this.items.last],{fullscreen:this.items.fullscreen,prepareKenburn:this.o("kenburns")?this.prepareKenburn.jBind(this):!1}),this.replaceEffect.start(this.items.fullscreen,!0,{start:this.o("kenburns")?this.startKenburn.jBind(this):!1}))},exitFullScreen:function(){this.enteringFullScreen=!1;var t=this.fullScreenBox.jGetSize(),e=this.fullScreenBox.jGetRect();this.effect.stop(),this.leaveFSMessage&&this.leaveFSMessage.hide(0),i.browser.fullScreen.capable&&i.browser.fullScreen.enabled()?(i.browser.fullScreen.cancel(),this.selectors&&this.scrollSelectors(this.items.items[this.items.last].selector),this.autoScroll()):(this.btnFullscreen&&this.btnFullscreen.hide(),this.fullScreenExitFX||(this.fullScreenExitFX=new s.FX(this.fullScreenBox,{duration:400,transition:s.FX.Transition.cubicOut,onStart:function(){this.fullScreenBox.jSetCss({position:"absolute",width:t.width,height:t.height,top:e.top,left:e.left}).jAppendTo(document.body)}.jBind(this),onComplete:function(){this.selectors&&this.selectors.show(),this.onExitFullScreen(!0)}.jBind(this)})),this.fullScreenExitFX.start({width:[t.width,this.boxSize.width],height:[t.height,this.boxSize.height],top:[0+e.top,this.boxBoundaries.top],left:[0+e.left,this.boxBoundaries.left],opacity:[1,.5]}))},onExitFullScreen:function(t){this.fullScreenBox&&(this.prepareToFullScreen(),this.enteringFullScreen=!1,this.items.fullscreen=!1,this.isFullScreen=!1,this.items.fullscreen=!1,this.container.append(this.slidesNode),this.selectors&&this.selectors.jAppendTo(this.container,"left"==this.o("selectors")?"top":this.o("selectors")),this.fullScreenBox.hide(),this.btnFullscreen.jRemoveClass("mss-button-fullscreen-exit").jAddClass("mss-button-fullscreen-enter").show(),this.onResize(),this.items.FSImageLoad(null,!0),"fullScreen"==this.items.items[this.items.last].whatImg&&this.items.items[this.items.last].defSize&&(this.effect.kenburnsStop=!1,this.replaceEffect&&this.replaceEffect.stop(),this.replaceEffect=new this.replaceImg(this.items.items[this.items.last],{fullscreen:this.items.fullscreen,prepareKenburn:this.o("kenburns")?this.prepareKenburn.jBind(this):!1}),this.replaceEffect.start(this.items.fullscreen,!0,{start:this.o("kenburns")?this.startKenburn.jBind(this):!1})))},startKenburn:function(){this.effect.kenburns.start({start:this.effect._startEffectKenburns.jBind(this.effect),end:this.effect._endEffectKenburns.jBind(this.effect)})},prepareKenburn:function(t){this.effect.prepareKenburns({kenburns:!0,item:{node:t.node,index:t.index,currentImg:this.items.fullscreen?t.fullScreenImg:t.smallImg}})},replaceImg:function(){var t=function(t,e){this.item=t,this.els=[],this.moving=!1,this.speed=1600,this.prepareKen=e.prepareKenburn,this.effectFullscreen=e.fullscreen,this.replace=!0,(this.effectFullscreen&&"fullScreen"==this.item.whatImg||!this.effectFullscreen&&"default"==this.item.whatImg)&&(this.noEffect=!0,this.replace=!1),this.effectFullscreen?(this.type="fullScreen",this.els.push(this.item.smallImg),this.els.push(this.item.fullScreenImg)):(this.type="default",this.item.smallImg&&this.item.smallImg.show(),this.els.push(this.item.fullScreenImg),this.els.push(this.item.smallImg)),this.els[0]&&"string"!=s.jTypeOf(this.els[0])&&this.els[1]&&"string"!=s.jTypeOf(this.els[1])||(this.noEffect=!0)};return t.prototype={render:function(){this.els[0].offsetHeight,this.els[1].offsetHeight},prepare:function(){this.noEffect||(this.els[0].jSetOpacity(1),this.els[1].jSetOpacity(0),this.els[0].jSetCss({position:"absolute",left:0,bottom:0,top:0,right:0,margin:"auto"}),this.item.node.appendChild(this.els[1]),this.prepareKen&&this.prepareKen(this.item),s.browser.ieMode&&s.browser.ieMode<10?this.FX=new s.PFX(this.els,{duration:this.speed,onComplete:a(function(){this.moving=!1,this.startKenburn()}).jBind(this)}):this.render())},rejSetStyle:function(){this.els[0].jSetCss({transition:"",position:"",left:"",bottom:"",top:"",right:"",margin:""})},end:function(){this.els[0].parentNode&&this.els[0].jRemove(),this.els[0].jSetOpacity(1),this.rejSetStyle(),this.els[1].jSetCssProp("transition","")},cancel:function(){this.rejSetStyle(),this.els[1].jSetOpacity(1),this.els[1].jRemove(),this.item.whatImg="default"==this.type?"fullScreen":"default"},stop:function(){!this.noEffect&&this.moving&&(this.moving=!1,this.FX?this.FX.stop(!0):(this.els[0].jRemoveEvent("transitionend"),this.els[1].jRemoveEvent("transitionend")),this.end())},startKenburn:function(){this.prepareKen&&this.ken&&this.ken()},start:function(t,e,i){this.noEffect||this.one||(this.one=!0,this.moving=!0,i&&i.start&&(this.ken=i.start),this.prepare(),this.item.whatImg=this.type,e?this.effectFullscreen==t?s.browser.ieMode&&s.browser.ieMode<10?this.FX.start([{opacity:[1,0]},{opacity:[0,1]}]):(this.els["default"==this.type?0:1].jAddEvent("transitionend",a(function(t){this.els["default"==this.type?0:1].jRemoveEvent(t.type),this.moving=!1,this.end(),this.startKenburn()}).jBind(this)),this.els[0].jSetCss({transition:"opacity"+String.fromCharCode(32)+this.speed+"ms",opacity:0}),this.els[1].jSetCss({transition:"opacity"+String.fromCharCode(32)+this.speed+"ms",opacity:1})):(this.cancel(),this.noEffect=!0):(this.moving=!1,this.end(),this.els[1].jSetOpacity(1)))}},t}(),initDragOnSlider:function(){var t,e,i,n,o,r,l,c,d,u,f,m,p,g=!1,v="vertical"===this.o("orientation")?"y":"x",b=this.slidesWrapperNode.jGetSize()["y"==v?"height":"width"],w=b/2,j=30,S=201,y="",E={},C=0,x="x"==v?"left":"top",T={transition:h+String.fromCharCode(32)+"400ms cubic-bezier(.18,.35,.58,1)"},k=function(t){var e={x:0,y:0};return(t.jGetCss(h)||"").replace(/matrix\(([^\)]+)\)/,function(t,i){var s=i.split(",");e.x+=parseInt(s[4],10),e.y+=parseInt(s[5])}),e},M=function(t){t&&(t.node.jSetCssProp(x,"").hide(),t=null)},A=a(function(h){if("dragstart"==h.state)this.effect.stop(),this.textEffect&&this.textEffect.stop(),this.autoScroll(!0),!this.l&&(this.l=this.items.items.length),this.slidesWrapperNode.jSetCssProp("transition",""),this.slidesWrapperNode.jRemoveEvent("transitionend"),d=k(this.slidesWrapperNode),this.slidesWrapperNode.jSetCssProp("transform","translate3d("+d.x+"px,"+d.y+"px,0)"),this.wrapperPoint=d[v],l=C,E={x:h.x,y:h.y,ts:h.timeStamp},b=a(this.slidesWrapperNode).jGetSize()["y"==v?"height":"width"],M(e),M(i),n=this.l<3?!1:this.o("loop"),!t&&(t=this.items.items[this.items.last]),i=this.items.last-1<0?n?this.items.items[this.l-1]:null:this.items.items[this.items.last-1],e=this.items.last+1>=this.l?n?this.items.items[0]:null:this.items.items[this.items.last+1],l*=-1,this.effect.prevKen=u,i&&(i.node.jSetCssProp(x,l-b+"px").show(),this.o("kenburns")&&i.img&&(f=new s.Effects.Kenburns(i.node,i.index,this.effect.prevKen))),e&&(e.node.jSetCssProp(x,l+b+"px").show(),this.o("kenburns")&&e.img&&(m=new s.Effects.Kenburns(e.node,e.index,this.effect.prevKen))),t.node.jSetCssProp(x,l+"px").show(),t.node.jGetSize(),g=!1;else{if(g)return;if(r=h[v]-E[v],p={x:0,y:0},"dragend"==h.state){if(g)return;return o=h.timeStamp-E.ts,(Math.abs(r)>w||S>o&&Math.abs(r)>j)&&(y=r>0&&i?"backward":0>=r&&e?"forward":"")&&(this.stopEffect=!0,c=t,"backward"==y?(this.effect.item=i,C+=b,t=i,i=c,u=f,f=null,m&&m.recoverySize(!0)):(this.effect.item=e,C-=b,t=e,e=c,u=m,m=null,f&&f.recoverySize(!0))),p[v]=C,this.slidesWrapperNode.jSetCssProp("transform","translate3d("+p.x+"px,"+p.y+"px,0)"),this.slidesWrapperNode.jSetCss(T),this.slidesWrapperNode.jAddEvent("transitionend",a(function(t){this.recoveryPositionAfterDrag()}).jBind(this)),0==r&&(M(e),M(i)),c&&this.jump({target:y}),c=null,r=0,void this.autoScroll()}"horizontal"==this.o("orientation")&&Math.abs(r)>Math.abs(h.y-E.y)||"vertical"==this.o("orientation")&&Math.abs(r)>Math.abs(h.x-E.x)?(h.stopDefaults(),p[v]=this.wrapperPoint+r,this.slidesWrapperNode.jSetCssProp("transform","translate3d("+p.x+"px,"+p.y+"px,0)")):(g=!0,M(i),M(e),this.recoveryPositionAfterDrag(),this.autoScroll())}}).jBind(this);this.recoveryPositionAfterDrag=a(function(){this.slidesWrapperNode.jRemoveEvent("transitionend"),this.slidesWrapperNode.jSetCssProp("transform","translate3d(0,0,0)"),this.slidesWrapperNode.jSetCssProp("transition",""),t&&t.node.jSetCssProp(x,""),C=0,this.wrapperPoint=0,M(e),M(i),u&&u.start({start:this.effect._startEffectKenburns.jBind(this.effect),end:this.effect._endEffectKenburns.jBind(this.effect)}),m&&m.recoverySize(!0),f&&f.recoverySize(!0),this.effect.kenburns=u,e=null,i=null,t=null,this.stopEffect=!1}).jBind(this),this.slidesWrapperNode.jSetCss("transform","translate3d(0,0,0)"),this.wrapperPoint=0,this.slidesNode.jAddEvent("touchdrag",A)},initDragOnSelectors:function(){var t,e,i,s,n,o,r,l,c,d=300,u=this.selectorsArrows&&"relative"==this.selectorsArrows.prev.jGetCss("position")?!0:!1,f=function(t){var e,s=0;for(e=1.5;90>=e;e+=1.5)s+=t*Math.cos(e/Math.PI/2);return 0>i&&(s*=-1),s};s=a(function(s){var a={x:0,y:0};if(!this.items.selectorsSize&&(this.items.selectorsSize=this.selectors.jGetSize()),t="vertical"==this.selectorsSettings.orientation?"y":"x",e=this.items.selectorsSize[this.selectorsSettings.sides[1]]-this.items.wrapSelSize[this.selectorsSettings.sides[1]],u&&(e-=this.selectorsArrows.prev.jGetSize()[this.selectorsSettings.sides[1]]+this.selectorsArrows.next.jGetSize()[this.selectorsSettings.sides[1]]),"dragstart"==s.state)void 0==this.items.movePointThumbnails&&(this.items.movePointThumbnails=0),this.selectorsContainer.jSetCssProp("transition",h+String.fromCharCode(32)+"0ms"),n=s[t],l=s.y,r=s.x,c=!1;else{if("dragend"==s.state){if(c)return;o=f(Math.abs(i)),this.items.movePointThumbnails+=o,this.items.movePointThumbnails>=0&&(this.items.movePointThumbnails=0),this.items.movePointThumbnails<=e&&(this.items.movePointThumbnails=e),a[t]=this.items.movePointThumbnails,this.selectorsContainer.jSetCssProp("transition",h+String.fromCharCode(32)+d+"ms cubic-bezier(.0,.0,.0,1)"),this.selectorsContainer.jSetCssProp("transform","translate3d("+a.x+"px,"+a.y+"px,0px)"),i=0}else{if(c)return;"horizontal"==this.selectorsSettings.orientation&&Math.abs(s.x-r)>Math.abs(s.y-l)||"vertical"==this.selectorsSettings.orientation&&Math.abs(s.x-r)<Math.abs(s.y-l)?(s.stopDefaults(),i=s[t]-n,this.items.movePointThumbnails+=i,a[t]=this.items.movePointThumbnails,this.selectorsContainer.jSetCssProp("transform","translate3d("+a.x+"px,"+a.y+"px,0px)"),this.items.movePointThumbnails>=0?this.selectorsArrows.disable("prev"):this.selectorsArrows.enable("prev"),this.items.movePointThumbnails<=e?this.selectorsArrows.disable("next"):this.selectorsArrows.enable("next")):c=!0}n=s[t]}}).jBind(this),this.selectorsContainer.jAddEvent("touchdrag",s)},autoScroll:function(t){var e,i,s;clearTimeout(this.auto_),this.auto_=null,!this.o("autoplay")||t||this.stopAutoScroll||(e=a(function(){return i=Math.rand(0,this.items.items.length-1),i==this.items.last?e():i}).jBind(this),s=function(){this.jump({target:this.o("shuffle")?e():"forward",effect:this.o("effect"),kenburns:this.o("kenburns")})},this.auto_=setTimeout(s.jBind(this),this.o("slide-duration")))},play:function(){this.set("autoplay",!0),this.stopAutoScroll=!1,this.autoScroll(),this.recoveryPositionAfterDrag&&this.recoveryPositionAfterDrag(),
this.jump({target:"forward"})},pause:function(){this.set("autoplay",!1),this.autoScroll(!0),this.stopAutoScroll=!0,this.auto_&&clearTimeout(this.auto_),this.auto_=!1},stop:function(){this.auto_&&clearTimeout(this.auto_),this.auto_=!1,this.effect&&this.effect.stop(),this.textEffect&&this.textEffect.stop(),this.replaceEffect&&this.replaceEffect.stop(),this.hold_=!1},next:function(){this.jump({target:"forward"})},previous:function(){this.jump({target:"backward"})},publicJump:function(t){!this.itemsCount&&(this.itemsCount=this.items.items.length),t-=1,t>=0&&t<this.itemsCount&&this.jump(t)},dispose:function(){this.pause();var t=0,e=this.cachedCSS.length;for(this.fullScreenBox&&(this.fullScreenBox.kill(),this.fullScreenBox=null),a(document).jRemoveEvent("keydown",this.keyboardCallback),a(window).jRemoveEvent("resize",this.resizeCallback),this.stop(),a(this.originalNodes).jEach(function(t){t.parentNode&&a(t).jRemove()}),s.$A(this.container.childNodes).jEach(function(t){a(t).kill()}),a(this.container).jClearEvents().jRemoveClass().jAddClass(this.originalClasses),a(this.container).jSetCss({padding:""}),this.container.jDel("slideshow"),a(this.originalNodes).jEach(function(t){a(t).jAppendTo(this.container)},this);e>t;t++)try{s.removeCSS("magicslideshow-css-reset",this.cachedCSS[t])}catch(i){}}},s.extend(l.prototype,s.customEvents);var c=[],d={version:"v2.0.35",options:{},extraOptions:{},extraOptionsMobile:{},dispose:function(){return c=a(c).filter(function(t){return t.dispose()})},start:function(t){var i,n,o=s.extend(d.options,window.MagicSlideshowOptions||{}),r=s.extend(d.extraOptions,window.MagicSlideshowExtraOptions||{});s.browser.touchScreen&&s.browser.mobile&&(o=s.extend(o,window.MagicSlideshowOptionsMobile||{}),r=s.extend(r,window.MagicSlideshowExtraOptionsMobile||{})),arguments.length?(n=e(t),n||(i=s.extend({},[o,r[t.id||t]||{}]),c.push(new l(a(t),i)))):s.$A(document.byClass("MagicSlideshow")).map(a(function(t){return d.start(t)}).jBind(this))},stop:function(t){var i,s,n,o=[];if(arguments.length){if(i=e(t)){for(s=0,n=c.length;n>s;s++)c[s].$J_UUID!=i.$J_UUID&&o.push(c[s]);c=o,i.dispose()}}else d.dispose()},refresh:function(t){t?(d.stop(a(t)),d.start(a(t))):(d.dispose(),d.start())},play:function(t){var i;t?(i=e(t),i&&i.play()):a(c).jEach(function(t){t.play()})},pause:function(t){var i;t?(i=e(t),i&&i.pause()):a(c).jEach(function(t){t.pause()})},next:function(t){var i;t?(i=e(t),i&&i.next()):a(c).jEach(function(t){t.next()})},prev:function(t){var i;t?(i=e(t),i&&i.previous()):a(c).jEach(function(t){t.previous()})},jump:function(t,i){var s;i&&(t?(s=e(t),s&&s.publicJump(i)):a(c).jEach(function(t){t.publicJump(i)}))},enterFullscreen:function(t){var i;t&&(i=e(t),i&&i.enterFullScreen())},exitFullscreen:function(t){var i;t&&(i=e(t),i&&i.exitFullScreen())},getActiveSlide:function(t){var i,s=-1;return t&&(i=e(t),i&&(s=i.items.last)),s},resize:function(t){t?(_instance=e(t),_instance&&_instance.onResize()):a(c).jEach(function(t){t.onResize()})}};return a(document).jAddEvent("domready",function(){d.start()}),d}();